
2025-06-11 13:52:33,255 - main - INFO -      ⏱️ Estimated time remaining: 0.0 seconds
2025-06-11 13:52:33,255 - main - INFO -      📝 Current chunk: 122 characters
2025-06-11 13:52:33,267 - main - INFO -     📊 Generated 1536D embedding for chunk 1
2025-06-11 13:52:33,267 - main - INFO -     ✅ Dimension validation passed: 1536D matches schema
2025-06-11 13:52:33,559 - main - WARNING -   ⚠️ Database error for chunk 1: insert or update on table "user_document_vectors" violates foreign key constraint "user_document_vectors_encryption_key_id_fkey"
DETAIL:  Key (encryption_key_id)=(00000000-0000-0000-0000-000000000000) is not present in table "encryption_keys".
2025-06-11 13:52:33,583 - main - INFO - 🎉 Step 6 complete: Successfully stored 0 vectors for document 6e81aa84-bc54-4f7b-a6a8-979dc880468f
2025-06-11 13:52:33,583 - main - WARNING - ⚠️ 1 chunks failed processing (success rate: 0.0%)
2025-06-11 13:52:33,583 - main - INFO - ✅ Upload complete: {'success': True, 'document_id': '6e81aa84-bc54-4f7b-a6a8-979dc880468f', 'filename': 'test_small_document.txt', 'chunks_processed': 0, 'chunks_failed': 1, 'total_chunks': 1, 'success_rate': 0.0, 'text_length': 122, 'file_size': 122, 'processing_time': '~0.5s estimated', 'message': 'Successfully uploaded and vectorized test_small_document.txt (0.0% success rate)'}
INFO:     10.220.230.75:0 - "POST /upload-policy HTTP/1.1" 200 OK
INFO:     10.219.27.170:40184 - "GET /health HTTP/1.1" 200 OK
INFO:     10.219.27.170:40182 - "GET /health HTTP/1.1" 200 OK
INFO:     10.219.27.170:50872 - "GET /health HTTP/1.1" 200 OK
2025-06-11 13:52:43,479 - main - INFO - 🚀 Starting document upload for user b6a80398-0323-4622-ad3a-7e1b1ba56877: scan_classic_hmo.pdf
2025-06-11 13:52:43,479 - main - INFO - 📖 Step 1: Reading file data...
2025-06-11 13:52:43,482 - main - INFO - ✅ Step 1 complete: Read 2544678 bytes
2025-06-11 13:52:43,482 - main - INFO - 🔍 Step 2: Extracting text content from scan_classic_hmo.pdf...
2025-06-11 13:52:43,482 - main - INFO - 🔍 Starting text extraction from scan_classic_hmo.pdf (size: 2544678 bytes)
2025-06-11 13:52:43,482 - main - INFO - 📄 Detected PDF file, using PDF extraction...
2025-06-11 13:52:43,483 - main - INFO - 📄 Starting PDF text extraction (file size: 2544678 bytes)...
2025-06-11 13:52:43,483 - main - WARNING - ⚠️ PDF processing temporarily disabled during LlamaCloud migration
2025-06-11 13:52:43,483 - main - INFO - 📄 Returning mock content for PDF demo
2025-06-11 13:52:43,483 - main - INFO - ✅ Step 2 complete: Extracted 456 characters
2025-06-11 13:52:43,483 - main - INFO - 🆔 Generated document ID: de357966-ad4d-4293-aea6-f749da06865a
2025-06-11 13:52:43,483 - main - INFO - ✂️  Step 3: Chunking text (length: 456)...
2025-06-11 13:52:43,483 - main - INFO - ✅ Step 3 complete: Created 1 chunks from document
2025-06-11 13:52:43,484 - main - INFO - 🧠 Step 4: Loading embedding model...
2025-06-11 13:52:43,484 - main - INFO - ✅ Step 4 complete: Embedding model loaded
2025-06-11 13:52:43,484 - main - INFO - 🗄️  Step 5: Connecting to database...
2025-06-11 13:52:43,484 - main - INFO - ✅ Step 5 complete: Database connection established
2025-06-11 13:52:43,484 - main - INFO - 🔄 Step 6: Processing 1 chunks for embeddings...
2025-06-11 13:52:43,484 - main - INFO - 📊 Document processing breakdown:
2025-06-11 13:52:43,484 - main - INFO -    • Total text: 456 characters
2025-06-11 13:52:43,484 - main - INFO -    • Chunk size: 1 pieces
2025-06-11 13:52:43,484 - main - INFO -    • Estimated time: 0.5 seconds
2025-06-11 13:52:43,508 - main - INFO -   🎯 Milestone: 10% complete (1/1 chunks)
2025-06-11 13:52:43,508 - main - INFO -      ⏱️ Estimated time remaining: 0.0 seconds
2025-06-11 13:52:43,509 - main - INFO -      📝 Current chunk: 456 characters
2025-06-11 13:52:43,510 - main - INFO -     📊 Generated 1536D embedding for chunk 1
2025-06-11 13:52:43,510 - main - INFO -     ✅ Dimension validation passed: 1536D matches schema
2025-06-11 13:52:43,585 - main - WARNING -   ⚠️ Database error for chunk 1: insert or update on table "user_document_vectors" violates foreign key constraint "user_document_vectors_encryption_key_id_fkey"
DETAIL:  Key (encryption_key_id)=(00000000-0000-0000-0000-000000000000) is not present in table "encryption_keys".
2025-06-11 13:52:43,608 - main - INFO - 🎉 Step 6 complete: Successfully stored 0 vectors for document de357966-ad4d-4293-aea6-f749da06865a
2025-06-11 13:52:43,608 - main - WARNING - ⚠️ 1 chunks failed processing (success rate: 0.0%)
2025-06-11 13:52:43,608 - main - INFO - ✅ Upload complete: {'success': True, 'document_id': 'de357966-ad4d-4293-aea6-f749da06865a', 'filename': 'scan_classic_hmo.pdf', 'chunks_processed': 0, 'chunks_failed': 1, 'total_chunks': 1, 'success_rate': 0.0, 'text_length': 456, 'file_size': 2544678, 'processing_time': '~0.5s estimated', 'message': 'Successfully uploaded and vectorized scan_classic_hmo.pdf (0.0% success rate)'}
INFO:     10.220.230.75:0 - "POST /upload-policy HTTP/1.1" 200 OK
INFO:     10.219.27.170:50882 - "GET /health HTTP/1.1" 200 OK