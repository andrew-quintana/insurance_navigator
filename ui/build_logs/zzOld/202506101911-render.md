2025-06-11T02:28:00.427144803Z 2025-06-11 02:28:00,427 - agents.regulatory.regulatory - INFO - Regulatory agent initialized (mock=False)
2025-06-11T02:28:00.730986136Z 2025-06-11 02:28:00,730 - agent.patient_navigator - INFO - patient_navigator agent initialized with prompt version v0_1
2025-06-11T02:28:00.731109879Z 2025-06-11 02:28:00,731 - agent.patient_navigator - INFO - Successfully loaded prompt from agents/patient_navigator/prompts/prompt_patient_navigator_v0_1.md
2025-06-11T02:28:00.731347705Z 2025-06-11 02:28:00,731 - agent.patient_navigator - INFO - Successfully loaded 5 examples from agents/patient_navigator/prompt_examples_patient_navigator_v0_1.json
2025-06-11T02:28:00.731700142Z 2025-06-11 02:28:00,731 - agent.patient_navigator - INFO - Loaded 5 examples into Patient Navigator prompt
2025-06-11T02:28:00.736086963Z 2025-06-11 02:28:00,735 - agent.patient_navigator - INFO - Successfully loaded prompt from agents/patient_navigator/prompts/prompt_patient_navigator_v0_1.md
2025-06-11T02:28:00.736248737Z 2025-06-11 02:28:00,736 - agent.patient_navigator - INFO - Successfully loaded 5 examples from agents/patient_navigator/prompt_examples_patient_navigator_v0_1.json
2025-06-11T02:28:00.736545234Z 2025-06-11 02:28:00,736 - agent.patient_navigator - INFO - Loaded 5 examples into Patient Navigator prompt
2025-06-11T02:28:00.736588835Z 2025-06-11 02:28:00,736 - agent.patient_navigator - INFO - RAG capabilities configured successfully
2025-06-11T02:28:00.736696328Z 2025-06-11 02:28:00,736 - agents.patient_navigator.patient_navigator - INFO - Phase 7 features enabled
2025-06-11T02:28:00.736771309Z 2025-06-11 02:28:00,736 - agents.patient_navigator.patient_navigator - INFO - RAG enabled for patient_navigator
2025-06-11T02:28:00.736775799Z 2025-06-11 02:28:00,736 - agents.patient_navigator.patient_navigator - INFO - Patient Navigator Agent initialized with model claude-3-7-sonnet-20250219
2025-06-11T02:28:00.769746431Z ==> No open ports detected, continuing to scan...
2025-06-11T02:28:01.009333807Z ==> Docs on specifying a port: https://render.com/docs/web-services#port-binding
2025-06-11T02:28:01.232629286Z 2025-06-11 02:28:01,232 - agent.task_requirements - INFO - task_requirements agent initialized with prompt version v0_1
2025-06-11T02:28:01.232861631Z 2025-06-11 02:28:01,232 - agent.task_requirements - INFO - Successfully loaded prompt from agents/task_requirements/prompt_task_requirements_v0_1.md
2025-06-11T02:28:01.232946933Z 2025-06-11 02:28:01,232 - agent.task_requirements - INFO - Successfully loaded 3 examples from agents/task_requirements/prompt_examples_task_requirements_v0_1.json
2025-06-11T02:28:01.233044025Z 2025-06-11 02:28:01,232 - agent.task_requirements - INFO - Successfully loaded prompt from agents/task_requirements/prompt_task_requirements_v0_1.md
2025-06-11T02:28:01.233195248Z 2025-06-11 02:28:01,233 - agent.task_requirements - INFO - Successfully loaded 3 examples from agents/task_requirements/prompt_examples_task_requirements_v0_1.json
2025-06-11T02:28:01.23327295Z 2025-06-11 02:28:01,233 - agents.task_requirements.task_requirements - INFO - Task Requirements Agent initialized with model claude-3-7-sonnet-20250219
2025-06-11T02:28:01.638924403Z 2025-06-11 02:28:01,638 - agents.service_access_strategy.service_access_strategy - INFO - service_access_strategy agent initialized with prompt version v0_2
2025-06-11T02:28:01.639104607Z 2025-06-11 02:28:01,638 - agents.service_access_strategy.service_access_strategy - INFO - Successfully loaded prompt from agents/service_access_strategy/prompt_service_access_strategy_v0_2.md
2025-06-11T02:28:01.639997948Z 2025-06-11 02:28:01,639 - agents.service_access_strategy.service_access_strategy - INFO - Service Access Strategy Agent initialized with model claude-3-7-sonnet-20250219
2025-06-11T02:28:01.640164502Z 2025-06-11 02:28:01,640 - agents.service_access_strategy.service_access_strategy - INFO - Successfully loaded prompt from agents/service_access_strategy/prompt_service_access_strategy_v0_2.md
2025-06-11T02:28:01.724766036Z 2025-06-11 02:28:01,724 - agents.service_access_strategy.service_access_strategy - INFO - Service Access Strategy Agent initialized with model claude-3-7-sonnet-20250219
2025-06-11T02:28:01.725709378Z 2025-06-11 02:28:01,725 - agent.chat_communicator - INFO - chat_communicator agent initialized with prompt version v0_1
2025-06-11T02:28:01.726589368Z 2025-06-11 02:28:01,725 - agent.chat_communicator - INFO - Successfully loaded prompt from agents/chat_communicator/prompt_chat_communicator_v0_1.md
2025-06-11T02:28:01.726616379Z 2025-06-11 02:28:01,726 - agent.chat_communicator - INFO - Successfully loaded 4 examples from agents/chat_communicator/prompt_examples_chat_communicator_v0_1.json
2025-06-11T02:28:01.726800593Z 2025-06-11 02:28:01,726 - agent.chat_communicator - INFO - Successfully loaded prompt from agents/chat_communicator/prompt_chat_communicator_v0_1.md
2025-06-11T02:28:01.727064089Z 2025-06-11 02:28:01,726 - agent.chat_communicator - INFO - Successfully loaded 4 examples from agents/chat_communicator/prompt_examples_chat_communicator_v0_1.json
2025-06-11T02:28:01.727883618Z 2025-06-11 02:28:01,727 - agents.chat_communicator.chat_communicator - INFO - Chat Communicator Agent initialized with model claude-3-sonnet-20240229-v1h
2025-06-11T02:28:01.727895438Z 2025-06-11 02:28:01,727 - graph.agent_orchestrator - WARNING - 🚫 ORCHESTRATOR: Security bypass is ENABLED for all workflows
2025-06-11T02:28:01.727907108Z 2025-06-11 02:28:01,727 - graph.agent_orchestrator - INFO - All agents initialized successfully
2025-06-11T02:28:01.836130126Z 2025-06-11 02:28:01,835 - graph.agent_orchestrator - INFO - LangGraph workflows built successfully
2025-06-11T02:28:01.836262709Z 2025-06-11 02:28:01,836 - main - INFO - ✅ Agent orchestrator initialized
2025-06-11T02:28:01.83632969Z 2025-06-11 02:28:01,836 - main - INFO - 🎉 Startup complete - Insurance Navigator API ready!
2025-06-11T02:28:01.836555515Z INFO:     Application startup complete.
2025-06-11T02:28:01.836917414Z INFO:     Uvicorn running on http://0.0.0.0:10000 (Press CTRL+C to quit)
2025-06-11T02:28:02.434509278Z 🌐 Using production database: postgresql://postgres.jhrespvvhbnloxrieycf:beqhar-qincyg-Syxxi8@[host]
2025-06-11T02:28:02.435426989Z INFO:     127.0.0.1:59708 - "HEAD / HTTP/1.1" 405 Method Not Allowed
2025-06-11T02:28:09.591593529Z INFO:     10.219.27.110:47282 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:09.594154518Z INFO:     10.219.27.110:47292 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:09.788282675Z ==> Your service is live 🎉
2025-06-11T02:28:10.839458879Z INFO:     10.220.221.111:0 - "GET / HTTP/1.1" 200 OK
2025-06-11T02:28:13.776581392Z INFO:     10.219.27.110:47294 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:18.777522318Z INFO:     10.219.27.110:60940 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:18.778304866Z INFO:     10.219.27.110:60942 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:23.776864106Z INFO:     10.219.27.110:60954 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:28.776231585Z INFO:     10.219.27.110:50368 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:33.776341771Z INFO:     10.219.27.110:50374 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:38.776373324Z INFO:     10.219.27.110:59398 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:43.840388058Z INFO:     10.219.27.110:59404 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:48.777831812Z INFO:     10.219.27.110:47168 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:48.778346984Z INFO:     10.219.27.110:47166 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:53.776019593Z INFO:     10.219.27.110:47182 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:28:58.776251209Z INFO:     10.219.27.110:41354 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:03.776588928Z INFO:     10.219.27.110:41370 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:04.289234229Z INFO:     10.220.230.75:0 - "OPTIONS /login HTTP/1.1" 200 OK
2025-06-11T02:29:04.418271665Z 2025-06-11 02:29:04,415 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
2025-06-11T02:29:04.418321976Z Traceback (most recent call last):
2025-06-11T02:29:04.418327496Z   File "/usr/local/lib/python3.11/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
2025-06-11T02:29:04.418332386Z     version = _bcrypt.__about__.__version__
2025-06-11T02:29:04.418336736Z               ^^^^^^^^^^^^^^^^^
2025-06-11T02:29:04.418341766Z AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-11T02:29:06.289982931Z 2025-06-11 02:29:06,289 - db.services.user_service - INFO - User authenticated successfully: deploymenttest@example.com
2025-06-11T02:29:06.31259276Z 2025-06-11 02:29:06,312 - main - INFO - User logged in: deploymenttest@example.com
2025-06-11T02:29:06.316882849Z INFO:     10.220.230.75:0 - "POST /login HTTP/1.1" 200 OK
2025-06-11T02:29:06.931831802Z INFO:     10.220.63.148:0 - "OPTIONS /me HTTP/1.1" 200 OK
2025-06-11T02:29:07.118095112Z INFO:     10.220.230.75:0 - "GET /me HTTP/1.1" 200 OK
2025-06-11T02:29:08.776041795Z INFO:     10.219.27.110:43262 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:13.775905672Z INFO:     10.219.27.110:43276 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:18.839081523Z INFO:     10.219.27.110:58614 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:19.027924543Z INFO:     10.219.27.110:58616 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:19.373964996Z INFO:     10.220.230.75:0 - "OPTIONS /upload-policy HTTP/1.1" 200 OK
2025-06-11T02:29:19.595282993Z 2025-06-11 02:29:19,595 - main - INFO - 🚀 Starting document upload for user b6a80398-0323-4622-ad3a-7e1b1ba56877: test_small_document.txt
2025-06-11T02:29:19.595365794Z 2025-06-11 02:29:19,595 - main - INFO - 📖 Step 1: Reading file data...
2025-06-11T02:29:19.595373464Z 2025-06-11 02:29:19,595 - main - INFO - ✅ Step 1 complete: Read 122 bytes
2025-06-11T02:29:19.595388655Z 2025-06-11 02:29:19,595 - main - INFO - 🔍 Step 2: Extracting text content from test_small_document.txt...
2025-06-11T02:29:19.595895847Z 2025-06-11 02:29:19,595 - main - INFO - 🔍 Starting text extraction from test_small_document.txt (size: 122 bytes)
2025-06-11T02:29:19.595920587Z 2025-06-11 02:29:19,595 - main - INFO - 📝 Detected text file, using UTF-8 decoding...
2025-06-11T02:29:19.596002539Z 2025-06-11 02:29:19,595 - main - INFO - ✅ UTF-8 decoding successful: 122 characters
2025-06-11T02:29:19.596538161Z 2025-06-11 02:29:19,596 - main - INFO - ✅ Step 2 complete: Extracted 122 characters
2025-06-11T02:29:19.596598233Z 2025-06-11 02:29:19,596 - main - INFO - 🆔 Generated document ID: 6fc27624-a36d-43e7-9651-a47015b33d30
2025-06-11T02:29:19.596606953Z 2025-06-11 02:29:19,596 - main - INFO - ✂️  Step 3: Chunking text (length: 122)...
2025-06-11T02:29:19.598569638Z 2025-06-11 02:29:19,598 - main - INFO - ✅ Step 3 complete: Created 1 chunks from document
2025-06-11T02:29:19.598583818Z 2025-06-11 02:29:19,598 - main - INFO - 🧠 Step 4: Loading embedding model...
2025-06-11T02:29:19.598804843Z 2025-06-11 02:29:19,598 - main - INFO - Available memory: 8360MB
2025-06-11T02:29:19.598822314Z 2025-06-11 02:29:19,598 - main - INFO - Loading SBERT model: all-MiniLM-L6-v2...
2025-06-11T02:29:19.598890985Z 2025-06-11 02:29:19,598 - main - ERROR - ❌ Failed to load SBERT model: name 'SentenceTransformer' is not defined
2025-06-11T02:29:19.598960857Z 2025-06-11 02:29:19,598 - main - WARNING - ⚠️ Using mock embedding model for demo
2025-06-11T02:29:19.598996978Z 2025-06-11 02:29:19,598 - main - INFO - ✅ Step 4 complete: Embedding model loaded
2025-06-11T02:29:19.599026488Z 2025-06-11 02:29:19,598 - main - INFO - 🗄️  Step 5: Connecting to database...
2025-06-11T02:29:19.599564431Z 2025-06-11 02:29:19,599 - main - INFO - ✅ Step 5 complete: Database connection established
2025-06-11T02:29:19.599573291Z 2025-06-11 02:29:19,599 - main - INFO - 🔄 Step 6: Processing 1 chunks for embeddings...
2025-06-11T02:29:19.599576681Z 2025-06-11 02:29:19,599 - main - INFO - 📊 Document processing breakdown:
2025-06-11T02:29:19.599579401Z 2025-06-11 02:29:19,599 - main - INFO -    • Total text: 122 characters
2025-06-11T02:29:19.599582091Z 2025-06-11 02:29:19,599 - main - INFO -    • Chunk size: 1 pieces
2025-06-11T02:29:19.599584781Z 2025-06-11 02:29:19,599 - main - INFO -    • Estimated time: 0.5 seconds
2025-06-11T02:29:19.620961892Z 2025-06-11 02:29:19,620 - main - INFO -   🎯 Milestone: 10% complete (1/1 chunks)
2025-06-11T02:29:19.620977083Z 2025-06-11 02:29:19,620 - main - INFO -      ⏱️ Estimated time remaining: 0.0 seconds
2025-06-11T02:29:19.620986953Z 2025-06-11 02:29:19,620 - main - INFO -      📝 Current chunk: 122 characters
2025-06-11T02:29:19.621497885Z 2025-06-11 02:29:19,621 - main - WARNING -   ⚠️ Error processing chunk 1: 'list' object has no attribute 'tolist'
2025-06-11T02:29:19.643382258Z 2025-06-11 02:29:19,643 - main - INFO - 🎉 Step 6 complete: Successfully stored 0 vectors for document 6fc27624-a36d-43e7-9651-a47015b33d30
2025-06-11T02:29:19.643410768Z 2025-06-11 02:29:19,643 - main - WARNING - ⚠️ 1 chunks failed processing (success rate: 0.0%)
2025-06-11T02:29:19.643536511Z 2025-06-11 02:29:19,643 - main - INFO - ✅ Upload complete: {'success': True, 'document_id': '6fc27624-a36d-43e7-9651-a47015b33d30', 'filename': 'test_small_document.txt', 'chunks_processed': 0, 'chunks_failed': 1, 'total_chunks': 1, 'success_rate': 0.0, 'text_length': 122, 'file_size': 122, 'processing_time': '~0.5s estimated', 'message': 'Successfully uploaded and vectorized test_small_document.txt (0.0% success rate)'}
2025-06-11T02:29:19.644462203Z INFO:     10.220.230.75:0 - "POST /upload-policy HTTP/1.1" 200 OK
2025-06-11T02:29:23.776537995Z INFO:     10.219.27.110:58622 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:28.776007312Z INFO:     10.219.27.110:33780 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:33.776659076Z INFO:     10.219.27.110:33786 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:38.776030979Z INFO:     10.219.27.110:55314 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:43.776658011Z INFO:     10.219.27.110:55324 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:48.804353755Z 2025-06-11 02:29:48,804 - db.services.db_pool - ERROR - Database connection error: cannot call Connection.execute(): connection has been released back to the pool
2025-06-11T02:29:48.804600671Z 2025-06-11 02:29:48,804 - main - WARNING - ⚠️ Health check: Database connection error: cannot call Connection.execute(): connection has been released back to the pool
2025-06-11T02:29:48.805342298Z INFO:     10.219.27.110:45262 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:48.840263091Z INFO:     10.219.27.110:45276 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:50.365699027Z 2025-06-11 02:29:50,365 - main - INFO - 🚀 Starting document upload for user b6a80398-0323-4622-ad3a-7e1b1ba56877: scan_classic_hmo.pdf
2025-06-11T02:29:50.365725538Z 2025-06-11 02:29:50,365 - main - INFO - 📖 Step 1: Reading file data...
2025-06-11T02:29:50.36929164Z 2025-06-11 02:29:50,369 - main - INFO - ✅ Step 1 complete: Read 2544678 bytes
2025-06-11T02:29:50.36931611Z 2025-06-11 02:29:50,369 - main - INFO - 🔍 Step 2: Extracting text content from scan_classic_hmo.pdf...
2025-06-11T02:29:50.369705869Z 2025-06-11 02:29:50,369 - main - INFO - 🔍 Starting text extraction from scan_classic_hmo.pdf (size: 2544678 bytes)
2025-06-11T02:29:50.369846392Z 2025-06-11 02:29:50,369 - main - INFO - 📄 Detected PDF file, using PDF extraction...
2025-06-11T02:29:50.369978586Z 2025-06-11 02:29:50,369 - main - INFO - 📄 Starting PDF text extraction (file size: 2544678 bytes)...
2025-06-11T02:29:50.370008786Z 2025-06-11 02:29:50,369 - main - ERROR - ❌ Error extracting PDF text: name 'PyPDF2' is not defined
2025-06-11T02:29:50.370428516Z 2025-06-11 02:29:50,370 - main - ERROR - Traceback (most recent call last):
2025-06-11T02:29:50.370439356Z   File "/app/main.py", line 262, in extract_text_from_pdf
2025-06-11T02:29:50.370443526Z     pdf_reader = PyPDF2.PdfReader(io.BytesIO(file_data))
2025-06-11T02:29:50.370448186Z                  ^^^^^^
2025-06-11T02:29:50.370453026Z NameError: name 'PyPDF2' is not defined
2025-06-11T02:29:50.370457057Z 
2025-06-11T02:29:50.370680352Z 2025-06-11 02:29:50,370 - main - INFO - ✅ Step 2 complete: Extracted 0 characters
2025-06-11T02:29:50.372253468Z INFO:     10.220.230.75:0 - "POST /upload-policy HTTP/1.1" 400 Bad Request
2025-06-11T02:29:53.776207275Z INFO:     10.219.27.110:45292 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:29:58.776241343Z INFO:     10.219.27.110:55664 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:30:03.776162608Z INFO:     10.219.27.110:55672 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:30:08.776126343Z INFO:     10.219.27.110:39716 - "GET /health HTTP/1.1" 200 OK
2025-06-11T02:30:13.776502007Z INFO:     10.219.27.110:39722 - "GET /health HTTP/1.1" 200 OK