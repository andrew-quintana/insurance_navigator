{
  "test_timestamp": "2025-09-11T14:54:19.254425",
  "phase": "C",
  "test_name": "Phase C: Database-Only Testing",
  "configuration": {
    "backend": "none",
    "database": "production_supabase",
    "environment": "database_only_testing"
  },
  "tests": {
    "production_supabase_connection": {
      "status": "PASS",
      "details": {
        "connection_successful": true,
        "uuid_generation_working": true,
        "upload_pipeline_schema_exists": true,
        "test_uuid": "e83ed054-ca4a-482a-972e-5412092f94a4"
      }
    },
    "uuid_generation_production_database": {
      "status": "ERROR",
      "error": "invalid input for query argument $2: 'test_user_prod_db' (invalid UUID 'test_user_prod_db': length must be between 32..36 characters, got 17)"
    },
    "multi_user_uuid_isolation": {
      "status": "ERROR",
      "error": "invalid input for query argument $2: 'user1' (invalid UUID 'user1': length must be between 32..36 characters, got 5)"
    },
    "performance_production_database": {
      "status": "ERROR",
      "error": "invalid input for query argument $2 in element #0 of executemany() sequence: 'perf_test_user_0' (invalid UUID 'perf_test_user_0': length must be between 32..36 characters, got 16)"
    },
    "error_handling_recovery": {
      "status": "FAIL",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "database_error_handling": {
          "handled_correctly": true,
          "error": null
        },
        "recovery": {
          "successful": false,
          "error": "invalid input for query argument $2: 'recovery_test' (invalid UUID 'recovery_test': length must be between 32..36 characters, got 13)"
        }
      }
    },
    "database_schema_validation": {
      "status": "PASS",
      "details": {
        "schema_columns": [
          "document_id",
          "user_id",
          "filename",
          "mime",
          "bytes_len",
          "file_sha256",
          "parsed_sha256",
          "raw_path",
          "parsed_path",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "required_columns": [
          "document_id",
          "user_id",
          "file_sha256",
          "processing_status",
          "created_at"
        ],
        "missing_columns": [],
        "has_required_columns": true,
        "document_id_type": "uuid",
        "user_id_type": "uuid",
        "correct_types": true,
        "full_schema": [
          {
            "column_name": "document_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "user_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "filename",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "mime",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "bytes_len",
            "data_type": "bigint",
            "is_nullable": "NO"
          },
          {
            "column_name": "file_sha256",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_sha256",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "raw_path",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_path",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "processing_status",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "created_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          },
          {
            "column_name": "updated_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          }
        ]
      }
    }
  },
  "summary": {
    "total_tests": 6,
    "passed": 2,
    "failed": 4,
    "critical_failures": 4
  }
}