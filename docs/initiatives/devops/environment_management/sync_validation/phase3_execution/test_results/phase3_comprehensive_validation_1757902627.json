{
  "test_timestamp": "2025-09-14T19:16:48.948420",
  "phase": "3",
  "test_name": "Phase 3: Comprehensive Validation Testing",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "environment": "phase3_comprehensive_validation"
  },
  "tests": {
    "system_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-15T02:16:49.110256",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true
      }
    },
    "database_connectivity": {
      "status": "PASS",
      "details": {
        "connectivity": true,
        "schema_columns": [
          "document_id",
          "user_id",
          "filename",
          "mime",
          "bytes_len",
          "file_sha256",
          "parsed_sha256",
          "raw_path",
          "parsed_path",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "missing_columns": [],
        "schema_ok": true
      }
    },
    "user_authentication": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": "d8d6d412-47fa-48c7-a33b-78af3189634f",
        "token_valid": true,
        "user_created": true
      }
    },
    "document_upload_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "expected_document_uuid": "ae93ccba-e8a2-53f2-9e74-372b39845cad",
        "expected_chunk_uuid": "e3a8b28d-5c50-5e1f-8faa-791c95b1967d",
        "content_hash": "phase3_test_1757902610_This is a comprehensive Phase 3 test document crea",
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "phase3_test_document_1757902608.pdf",
                "mime_type": "application/pdf",
                "bytes_len": 1024,
                "sha256": "phase3_test_1757902610_This is a comprehensive Phase 3 test document crea"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        }
      }
    },
    "uuid_generation_consistency": {
      "status": "PASS",
      "details": {
        "document_uuid": "225275ee-9657-5671-9686-f9690ba8a27c",
        "chunk_uuid": "3b80ded0-9a44-5deb-a69e-a3b67ffa4e82",
        "job_uuid1": "84c89e71-baa7-4a47-8036-769c15df1397",
        "job_uuid2": "bf997a18-349f-42ea-9a44-46ff76418e5c",
        "document_valid": true,
        "chunk_valid": true,
        "job_valid": true,
        "document_consistent": true,
        "chunk_consistent": true,
        "job_unique": true,
        "db_consistent": true,
        "retrieved_uuid": "225275ee-9657-5671-9686-f9690ba8a27c"
      }
    },
    "chat_interaction_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "conversation_id": "conv_1757902626",
        "timestamp": "2025-09-15T02:17:06.761446",
        "has_response": true,
        "response_valid": true,
        "response_data": {
          "text": "I apologize, but I was unable to find any relevant information in the document you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, but it seems the document you referenced did not contain any information I could use to assist you.\n\nIf you have any other questions about your insurance policy or need help understanding your coverage, please let me know. I'm here to provide clear explanations and guide you through the process in a supportive way.",
          "response": "I apologize, but I was unable to find any relevant information in the document you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, but it seems the document you referenced did not contain any information I could use to assist you.\n\nIf you have any other questions about your insurance policy or need help understanding your coverage, please let me know. I'm here to provide clear explanations and guide you through the process in a supportive way.",
          "conversation_id": "conv_1757902626",
          "timestamp": "2025-09-15T02:17:06.761446",
          "metadata": {
            "processing_time": 9.573181867599487,
            "confidence": 0.9,
            "agent_sources": [
              "information_retrieval"
            ],
            "input_processing": {
              "original_language": "auto",
              "translation_applied": false
            },
            "agent_processing": {
              "agents_used": [
                "information_retrieval"
              ],
              "processing_time_ms": 9573
            },
            "output_formatting": {
              "tone_applied": "empathetic",
              "readability_level": "8th_grade",
              "next_steps_included": false
            }
          },
          "next_steps": [],
          "sources": [
            "information_retrieval"
          ]
        }
      }
    },
    "database_consistency": {
      "status": "PASS",
      "details": {
        "user_documents_count": 0,
        "documents_valid": true,
        "uuid_consistency": true,
        "user_documents": []
      }
    },
    "performance_validation": {
      "status": "PASS",
      "details": {
        "uuid_generation": {
          "time_seconds": 0.0014171600341796875,
          "threshold_seconds": 0.5,
          "uuids_generated": 50,
          "meets_threshold": true
        },
        "cloud_response": {
          "time_seconds": 0.11643385887145996,
          "threshold_seconds": 3.0,
          "status_code": 200,
          "meets_threshold": true
        }
      }
    },
    "error_handling_validation": {
      "status": "PASS",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "cloud_error_handling": {
          "invalid_endpoint_handled": true,
          "invalid_auth_handled": true
        }
      }
    },
    "cleanup_and_final_validation": {
      "status": "PASS",
      "details": {
        "cleanup_successful": true,
        "cleanup_error": null,
        "workflow_complete": true,
        "workflow_status": {
          "user_created": true,
          "user_id": "d8d6d412-47fa-48c7-a33b-78af3189634f",
          "access_token": "${SUPABASE_JWT_TOKEN}",
          "document_uploaded": true,
          "document_id": "ae93ccba-e8a2-53f2-9e74-372b39845cad",
          "document_processed": false,
          "chat_interaction": true,
          "conversation_id": "conv_1757902626"
        }
      }
    }
  },
  "summary": {
    "total_tests": 10,
    "passed": 10,
    "failed": 0,
    "critical_failures": 0
  },
  "workflow": {
    "user_created": true,
    "user_id": "d8d6d412-47fa-48c7-a33b-78af3189634f",
    "access_token": "${SUPABASE_JWT_TOKEN}",
    "document_uploaded": true,
    "document_id": "ae93ccba-e8a2-53f2-9e74-372b39845cad",
    "document_processed": false,
    "chat_interaction": true,
    "conversation_id": "conv_1757902626"
  }
}