# FRACAS FM-015: End-to-End Workflow Database Constraint Violation

## ğŸ¯ **FAILURE MODE OVERVIEW**

**Category**: Database Constraint Violation  
**Priority**: P2 - Medium  
**Status**: Active Investigation  
**Environment**: Staging  

## ğŸ“ **DIRECTORY STRUCTURE**

```
fm_015/
â”œâ”€â”€ prompts/                         # Investigation prompts
â”‚   â””â”€â”€ FRACAS_FM_015_INVESTIGATION_PROMPT.md
â”œâ”€â”€ docs/                           # Documentation and reports
â”‚   â””â”€â”€ FRACAS_FM_015_DATABASE_CONSTRAINT_VIOLATION.md
â””â”€â”€ README.md                       # This file
```

## ğŸ” **INVESTIGATION PROMPTS**

- **File**: `prompts/FRACAS_FM_015_INVESTIGATION_PROMPT.md`
- **Purpose**: Comprehensive investigation guide for end-to-end workflow database constraint violations
- **Time Estimate**: 120 minutes
- **Dependencies**: Access to staging environment, database access, and API testing tools

## ğŸ“„ **DOCUMENTATION**

- **File**: `docs/FRACAS_FM_015_DATABASE_CONSTRAINT_VIOLATION.md`
- **Purpose**: Complete failure analysis and technical details
- **Status**: To be generated by investigation

## ğŸš¨ **CRITICAL ISSUE**

The end-to-end workflow test failed with a database constraint violation:
```
new row for relation "upload_jobs" violates check constraint "ck_upload_jobs_status"
DETAIL: Failing row contains (558bf8ff-f47c-4833-a7ff-183a61d84d74, 2eae1bdf-90cb-4105-8011-1479173fe4ce, working, 0, null, 2025-09-25 17:42:18.511656+00, 2025-09-25 17:42:18.511656+00, parsing, {"test": true, "stage": "parsing"}, null, markdown-simple@1, text-embedding-3-small, 1).
```

## âœ… **RESOLUTION STATUS**

**ACTIVE INVESTIGATION**: Database constraint violation preventing end-to-end workflow completion
- Issue identified during staging environment testing
- Database schema constraint `ck_upload_jobs_status` is being violated
- Status field "working" appears to be invalid for the constraint
- Investigation required to understand constraint requirements and fix data insertion

## ğŸ”§ **QUICK START**

1. Read the investigation prompt: `prompts/FRACAS_FM_015_INVESTIGATION_PROMPT.md`
2. Review the failure documentation: `docs/FRACAS_FM_015_DATABASE_CONSTRAINT_VIOLATION.md`
3. Follow the investigation tasks in the prompt
4. Update documentation with findings

---

**Last Updated**: 2025-09-25  
**Maintained By**: Development Team
