{
  "test_timestamp": "2025-09-11T15:38:37.473578",
  "phase": "C",
  "test_name": "Phase C: Production Cloud Backend Testing",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "environment": "production_cloud_testing"
  },
  "tests": {
    "production_cloud_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-11T22:38:27.112084",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true,
        "response_time_ms": "unknown"
      }
    },
    "authentication_system": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": null,
        "token_valid": true,
        "signup_response": {
          "user": {
            "id": "b026f09d-d2a4-43d0-9d84-4862a76657ac",
            "email": "test_user_1757630317@example.com",
            "name": "test_user_1757630317"
          },
          "access_token": "***REMOVED***.eyJzdWIiOiJiMDI2ZjA5ZC1kMmE0LTQzZDAtOWQ4NC00ODYyYTc2NjU3YWMiLCJlbWFpbCI6InRlc3RfdXNlcl8xNzU3NjMwMzE3QGV4YW1wbGUuY29tIiwiZXhwIjoxNzU3NzE2NzE4LCJpYXQiOjE3NTc2MzAzMTgsImlzcyI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItbWluaW1hbC1hdXRoIiwiYXVkIjoiaW5zdXJhbmNlLW5hdmlnYXRvci11c2VycyJ9.RqHyJb6Ovpew2us8J1W2miNqjOHT5FNfhEnPm8kvvb4",
          "token_type": "bearer"
        },
        "login_response": {
          "user": {
            "id": "48432226-e7a4-4015-a60d-e2a4690362c5",
            "email": "test_user_1757630317@example.com",
            "name": "test_user_1757630317"
          },
          "access_token": "***REMOVED***.eyJzdWIiOiI0ODQzMjIyNi1lN2E0LTQwMTUtYTYwZC1lMmE0NjkwMzYyYzUiLCJlbWFpbCI6InRlc3RfdXNlcl8xNzU3NjMwMzE3QGV4YW1wbGUuY29tIiwiZXhwIjoxNzU3NzE2NzE4LCJpYXQiOjE3NTc2MzAzMTgsImlzcyI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItbWluaW1hbC1hdXRoIiwiYXVkIjoiaW5zdXJhbmNlLW5hdmlnYXRvci11c2VycyJ9.QdtUKu5zVwS_6YZEbJkJkzp-_gZRHIz255PnP39896M",
          "token_type": "bearer"
        }
      }
    },
    "uuid_generation_production_cloud": {
      "status": "PASS",
      "details": {
        "document_uuid": "a4741e11-5d78-5ab5-8b7e-fd361ee4df1f",
        "chunk_uuid": "6f2fad55-099e-5286-8dc7-059ae88aa400",
        "job_uuid": "f35c9b32-6435-4b6a-8f31-86be114837c5",
        "document_valid": true,
        "chunk_valid": true,
        "job_valid": true,
        "retrieved_uuid": "a4741e11-5d78-5ab5-8b7e-fd361ee4df1f",
        "is_consistent": true,
        "database_operations_successful": true
      }
    },
    "end_to_end_upload_pipeline": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "bytes_len"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_document.pdf",
                "mime_type": "application/pdf"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            },
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_document.pdf",
                "mime_type": "application/pdf"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            },
            {
              "type": "missing",
              "loc": [
                "body",
                "sha256"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_document.pdf",
                "mime_type": "application/pdf"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        },
        "endpoint_accessible": true
      }
    },
    "chat_endpoint_uuid_context": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "conversation_id": "conv_1757630323",
        "timestamp": "2025-09-11T22:38:43.370614",
        "has_response": true,
        "response_valid": true,
        "response_data": {
          "text": "I apologize, but I wasn't able to find any relevant information in our insurance documents to address your request. Insurance can be complex, and sometimes the information we have may not fully cover a user's specific situation. \n\nI'm happy to try and assist you further. Could you please provide some additional details about what you're looking for? That will help me better understand how I can help. I'm here to support you through this process in the most clear and helpful way possible.",
          "response": "I apologize, but I wasn't able to find any relevant information in our insurance documents to address your request. Insurance can be complex, and sometimes the information we have may not fully cover a user's specific situation. \n\nI'm happy to try and assist you further. Could you please provide some additional details about what you're looking for? That will help me better understand how I can help. I'm here to support you through this process in the most clear and helpful way possible.",
          "conversation_id": "conv_1757630323",
          "timestamp": "2025-09-11T22:38:43.370614",
          "metadata": {
            "processing_time": 4.122246742248535,
            "confidence": 0.9,
            "agent_sources": [
              "information_retrieval"
            ],
            "input_processing": {
              "original_language": "auto",
              "translation_applied": false
            },
            "agent_processing": {
              "agents_used": [
                "information_retrieval"
              ],
              "processing_time_ms": 4122
            },
            "output_formatting": {
              "tone_applied": "empathetic",
              "readability_level": "8th_grade",
              "next_steps_included": false
            }
          },
          "next_steps": [],
          "sources": [
            "information_retrieval"
          ]
        }
      }
    },
    "multi_user_uuid_isolation": {
      "status": "PASS",
      "details": {
        "generated_uuids": [
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440001",
            "uuid": "10585c40-97e6-5f9f-b073-99f7888c46fd"
          },
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440002",
            "uuid": "ca73a798-ae7d-5f0d-846c-a0d7cbac4af0"
          },
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440003",
            "uuid": "d5d18a14-1383-51ec-95bd-0f980e8b8610"
          }
        ],
        "unique_uuids": 3,
        "is_isolated": true,
        "all_stored": true,
        "all_consistent": true,
        "stored_uuids": [
          "10585c40-97e6-5f9f-b073-99f7888c46fd",
          "ca73a798-ae7d-5f0d-846c-a0d7cbac4af0",
          "d5d18a14-1383-51ec-95bd-0f980e8b8610"
        ]
      }
    },
    "performance_production_cloud": {
      "status": "PASS",
      "details": {
        "uuid_generation": {
          "time_seconds": 0.0015730857849121094,
          "threshold_seconds": 1.0,
          "uuids_generated": 100,
          "meets_threshold": true
        },
        "cloud_response": {
          "time_seconds": 0.1138770580291748,
          "threshold_seconds": 5.0,
          "status_code": 200,
          "meets_threshold": true
        }
      }
    },
    "error_handling_recovery": {
      "status": "FAIL",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "cloud_error_handling": {
          "invalid_endpoint_handled": true,
          "invalid_auth_handled": false
        }
      }
    },
    "database_consistency_validation": {
      "status": "PASS",
      "details": {
        "schema_validation": {
          "schema_columns": [
            "document_id",
            "user_id",
            "filename",
            "mime",
            "bytes_len",
            "file_sha256",
            "parsed_sha256",
            "raw_path",
            "parsed_path",
            "processing_status",
            "created_at",
            "updated_at"
          ],
          "required_columns": [
            "document_id",
            "user_id",
            "file_sha256",
            "processing_status",
            "created_at"
          ],
          "missing_columns": [],
          "has_required_columns": true,
          "document_id_type": "uuid",
          "user_id_type": "uuid",
          "correct_types": true
        },
        "consistency_test": {
          "test_uuid": "19cf8d0b-5a1d-588d-853d-fcc6a6d38cec",
          "retrieved_uuid": "19cf8d0b-5a1d-588d-853d-fcc6a6d38cec",
          "consistency_ok": true
        },
        "full_schema": [
          {
            "column_name": "document_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "user_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "filename",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "mime",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "bytes_len",
            "data_type": "bigint",
            "is_nullable": "NO"
          },
          {
            "column_name": "file_sha256",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_sha256",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "raw_path",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_path",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "processing_status",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "created_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          },
          {
            "column_name": "updated_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          }
        ]
      }
    }
  },
  "summary": {
    "total_tests": 9,
    "passed": 8,
    "failed": 1,
    "critical_failures": 1
  }
}