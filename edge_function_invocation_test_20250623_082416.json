{
  "timestamp": "2025-06-23T08:24:15.802462",
  "test_type": "edge_function_direct_invocation",
  "edge_function_tests": {
    "doc-parser_health": {
      "status": "failed",
      "http_status": 500,
      "response_time": 0.15825625000024957,
      "response_data": "{\"error\":\"Document parsing failed\",\"details\":\"Unexpected end of JSON input\"}",
      "headers": {
        "Date": "Mon, 23 Jun 2025 15:24:15 GMT",
        "Content-Type": "application/json",
        "Content-Length": "99",
        "Connection": "keep-alive",
        "CF-Ray": "9544fdc73a26aab7-SJC",
        "CF-Cache-Status": "DYNAMIC",
        "Access-Control-Allow-Origin": "*",
        "Content-Encoding": "gzip",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains; preload",
        "Vary": "Accept-Encoding",
        "Access-Control-Allow-Headers": "Content-Type, Authorization",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "sb-project-ref": "jhrespvvhbnloxrieycf",
        "X-Content-Type-Options": "nosniff",
        "x-deno-execution-id": "54f64f86-2e0d-4504-9628-162edb9ccaf0",
        "x-sb-edge-region": "us-west-1",
        "x-served-by": "supabase-edge-runtime",
        "Set-Cookie": "__cf_bm=hmwZbKRle6iFokDjRzTxkSKNZKUi3f.Dfo5jkoB6yoM-1750692255-1.0.1.1-Xj9eea.SUUCCRbnDFnROlCEcUceQEHZxvSn.8TT5vZz2cuWa4dHsdTAnET16dzXvySoOFOM8DxMm0CNvsZTWC34XFhEUwQZYWGIF0vsCGvE; path=/; expires=Mon, 23-Jun-25 15:54:15 GMT; domain=.supabase.co; HttpOnly; Secure; SameSite=None",
        "Server": "cloudflare",
        "alt-svc": "h3=\":443\"; ma=86400"
      },
      "response_json": {
        "error": "Document parsing failed",
        "details": "Unexpected end of JSON input"
      }
    },
    "vector-processor_health": {
      "status": "failed",
      "http_status": 500,
      "response_time": 0.14333979200000613,
      "response_data": "{\"error\":\"Internal server error\",\"details\":\"Unexpected end of JSON input\"}",
      "headers": {
        "Date": "Mon, 23 Jun 2025 15:24:16 GMT",
        "Content-Type": "text/plain;charset=UTF-8",
        "Content-Length": "97",
        "Connection": "keep-alive",
        "CF-Ray": "9544fdc8295622d2-SJC",
        "CF-Cache-Status": "DYNAMIC",
        "Content-Encoding": "gzip",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains; preload",
        "Vary": "Accept-Encoding",
        "sb-project-ref": "jhrespvvhbnloxrieycf",
        "X-Content-Type-Options": "nosniff",
        "x-deno-execution-id": "71f9dcd9-61bd-4d00-925d-dbc7b0ff0148",
        "x-sb-edge-region": "us-west-1",
        "x-served-by": "supabase-edge-runtime",
        "Set-Cookie": "__cf_bm=k3vBfuE4KiP34GHgrFob3_FG5hrEa4P3fgXcCodNyCw-1750692256-1.0.1.1-_PTd5n2Al0ftkbBtnjIq0d2nw4Tz3x3F7Qn.K7BgJkBxttJZyCJGnfRSH9AhZ6TNxgLjKmzgkygpRUbTJ6G6WeoncE0lIL_pMKoOnJKcX_E; path=/; expires=Mon, 23-Jun-25 15:54:16 GMT; domain=.supabase.co; HttpOnly; Secure; SameSite=None",
        "Server": "cloudflare",
        "alt-svc": "h3=\":443\"; ma=86400"
      },
      "response_json": {
        "error": "Internal server error",
        "details": "Unexpected end of JSON input"
      }
    },
    "doc_parser_invocation": {
      "status": "failed",
      "http_status": 400,
      "response_time": 0.17967237499988187,
      "response_data": "{\"error\":\"Document ID and storage path are required\"}",
      "payload_sent": {
        "document_id": "test-doc-parser-12345",
        "document_path": "/test/sample.txt",
        "title": "Test Document for Doc Parser"
      },
      "headers": {
        "Date": "Mon, 23 Jun 2025 15:24:16 GMT",
        "Content-Type": "application/json",
        "Content-Length": "76",
        "Connection": "keep-alive",
        "CF-Ray": "9544fdcb3d1467f9-SJC",
        "CF-Cache-Status": "DYNAMIC",
        "Access-Control-Allow-Origin": "*",
        "Content-Encoding": "gzip",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains; preload",
        "Vary": "Accept-Encoding",
        "Access-Control-Allow-Headers": "Content-Type, Authorization",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "sb-project-ref": "jhrespvvhbnloxrieycf",
        "x-deno-execution-id": "224197cf-86fc-4387-8f0f-70eb0b070f17",
        "x-sb-edge-region": "us-west-1",
        "x-served-by": "supabase-edge-runtime",
        "Set-Cookie": "__cf_bm=Ek6bDZPmDX9RikdnN.641PmTuwghViW6KIvR73RcrYs-1750692256-1.0.1.1-V8zPPT1nu5GmWn8_v.Og54_t850z5RPSp8BfD_F5znBDlnUVs6zfzCpj4FRELCU3din_FM1gpJlC4nAWV2_pJz2cwt600VzvYkZEs1gIWWY; path=/; expires=Mon, 23-Jun-25 15:54:16 GMT; domain=.supabase.co; HttpOnly; Secure; SameSite=None",
        "Server": "cloudflare",
        "alt-svc": "h3=\":443\"; ma=86400"
      },
      "response_json": {
        "error": "Document ID and storage path are required"
      }
    },
    "vector_processor_invocation": {
      "status": "failed",
      "http_status": 400,
      "response_time": 0.1453186660000938,
      "response_data": "{\"error\":\"Missing required parameters\",\"details\":\"Both documentId and extractedText are required\"}",
      "payload_sent": {
        "document_id": "test-vector-processor-12345",
        "force_reprocess": true
      },
      "headers": {
        "Date": "Mon, 23 Jun 2025 15:24:16 GMT",
        "Content-Type": "text/plain;charset=UTF-8",
        "Content-Length": "104",
        "Connection": "keep-alive",
        "CF-Ray": "9544fdcc597e270c-SJC",
        "CF-Cache-Status": "DYNAMIC",
        "Content-Encoding": "gzip",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains; preload",
        "Vary": "Accept-Encoding",
        "sb-project-ref": "jhrespvvhbnloxrieycf",
        "x-deno-execution-id": "9df3ad41-390e-4d91-b73a-3192f7e8c264",
        "x-sb-edge-region": "us-west-1",
        "x-served-by": "supabase-edge-runtime",
        "Set-Cookie": "__cf_bm=Moi5zsRZKgeD.d_7TbAz645RQTVMszXOU528WIKkEys-1750692256-1.0.1.1-qc6bIMGvo.kPSWcFTg9Qo3DSQe.me2niHLs577wT00.6eXNNBUdcgumKl7VScgBSKMigTWSTHLFEfL8lCmTZ_ldYkcxJUdxI9ihe0Obx5oo; path=/; expires=Mon, 23-Jun-25 15:54:16 GMT; domain=.supabase.co; HttpOnly; Secure; SameSite=None",
        "Server": "cloudflare",
        "alt-svc": "h3=\":443\"; ma=86400"
      },
      "response_json": {
        "error": "Missing required parameters",
        "details": "Both documentId and extractedText are required"
      }
    }
  },
  "real_document_processing": {
    "status": "completed",
    "document": {
      "id": "bf98c5b5-a215-4a8f-9d8a-19afd548b655",
      "title": "Health Insurance Marketplace Standards 2025",
      "path": "regulatory/59629cd5-0529-479b-8c41-61fb9c47ee92/11713fb0fa694674002530a832fb831d1c1a9a36465e91b69f7944feb016daa7/marketplace_regulations_2025.txt"
    },
    "doc_parser_result": {
      "status": "failed",
      "http_status": 400,
      "response_time": 0.17321395800036044,
      "response_data": "{\"error\":\"Document ID and storage path are required\"}",
      "payload_sent": {
        "document_id": "bf98c5b5-a215-4a8f-9d8a-19afd548b655",
        "document_path": "regulatory/59629cd5-0529-479b-8c41-61fb9c47ee92/11713fb0fa694674002530a832fb831d1c1a9a36465e91b69f7944feb016daa7/marketplace_regulations_2025.txt",
        "title": "Health Insurance Marketplace Standards 2025"
      },
      "headers": {
        "Date": "Mon, 23 Jun 2025 15:24:16 GMT",
        "Content-Type": "application/json",
        "Content-Length": "76",
        "Connection": "keep-alive",
        "CF-Ray": "9544fdca385e2516-SJC",
        "CF-Cache-Status": "DYNAMIC",
        "Access-Control-Allow-Origin": "*",
        "Content-Encoding": "gzip",
        "Strict-Transport-Security": "max-age=31536000; includeSubDomains; preload",
        "Vary": "Accept-Encoding",
        "Access-Control-Allow-Headers": "Content-Type, Authorization",
        "Access-Control-Allow-Methods": "GET, POST, PUT, DELETE, OPTIONS",
        "sb-project-ref": "jhrespvvhbnloxrieycf",
        "x-deno-execution-id": "07b4ef4c-ea1d-46a7-8315-28f32810b2e0",
        "x-sb-edge-region": "us-west-1",
        "x-served-by": "supabase-edge-runtime",
        "Set-Cookie": "__cf_bm=Cc7wPJF6NR.5rbXlSdQbfvD4yvJ.kkoGpnNJyfKgpqs-1750692256-1.0.1.1-F2tWy7FhtMl.KXeXqUG7SXO8aU8iLvKZHebstGolUjL8l3EsceOJ53PGNsGN5cgv5ssaEsdk9OKOurQ3YrZ09oAsZxDi.711aSOmQK53K2Y; path=/; expires=Mon, 23-Jun-25 15:54:16 GMT; domain=.supabase.co; HttpOnly; Secure; SameSite=None",
        "Server": "cloudflare",
        "alt-svc": "h3=\":443\"; ma=86400"
      },
      "response_json": {
        "error": "Document ID and storage path are required"
      }
    },
    "vector_processor_result": {
      "status": "skipped",
      "reason": "doc_parser_failed"
    }
  },
  "summary": {
    "overall_status": "failed",
    "health_checks_working": false,
    "edge_functions_invokable": false,
    "real_document_processing": true,
    "doc_parser_functional": false,
    "vector_processor_functional": false,
    "critical_issues": [
      "Edge functions not responding to health checks",
      "Edge functions cannot be invoked with POST requests",
      "Doc-parser function not working properly",
      "Vector-processor function not working properly"
    ],
    "recommendations": [
      "Check Supabase edge function deployment and connectivity",
      "Investigate edge function authentication and request handling",
      "Check doc-parser implementation and our JSON parsing fixes",
      "Check vector-processor implementation and database connectivity",
      "Edge functions are completely non-functional - check deployment"
    ]
  }
}