{
  "test_timestamp": "2025-09-11T14:55:34.825194",
  "phase": "C",
  "test_name": "Phase C: Database-Only Testing",
  "configuration": {
    "backend": "none",
    "database": "production_supabase",
    "environment": "database_only_testing"
  },
  "tests": {
    "production_supabase_connection": {
      "status": "PASS",
      "details": {
        "connection_successful": true,
        "uuid_generation_working": true,
        "upload_pipeline_schema_exists": true,
        "test_uuid": "c89c02e9-4280-4bd7-9e1a-411ad158517e"
      }
    },
    "uuid_generation_production_database": {
      "status": "PASS",
      "details": {
        "document_uuid": "adaeae6f-5887-5709-8096-f33e262b486d",
        "retrieved_uuid": "adaeae6f-5887-5709-8096-f33e262b486d",
        "is_consistent": true,
        "is_valid_format": true,
        "chunk_uuid": "4e1bc649-4fd3-578c-a095-14f5e74b0e4f",
        "database_operations_successful": true
      }
    },
    "multi_user_uuid_isolation": {
      "status": "PASS",
      "details": {
        "generated_uuids": [
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440001",
            "uuid": "0388d7f9-8ed6-5fd9-bc0b-ec5f14bf8ef0"
          },
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440002",
            "uuid": "b9f047ab-b95c-54c5-b866-dfd75141de6e"
          },
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440003",
            "uuid": "48c0fbda-e9bf-5013-840a-e0de2b3d77c6"
          }
        ],
        "unique_uuids": 3,
        "is_isolated": true,
        "all_stored": true,
        "all_consistent": true,
        "stored_uuids": [
          "0388d7f9-8ed6-5fd9-bc0b-ec5f14bf8ef0",
          "b9f047ab-b95c-54c5-b866-dfd75141de6e",
          "48c0fbda-e9bf-5013-840a-e0de2b3d77c6"
        ]
      }
    },
    "performance_production_database": {
      "status": "ERROR",
      "error": "duplicate key value violates unique constraint \"documents_pkey\"\nDETAIL:  Key (document_id)=(c060109c-00cf-5901-a582-e1ba9b24660e) already exists."
    },
    "error_handling_recovery": {
      "status": "PASS",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "database_error_handling": {
          "handled_correctly": true,
          "error": null
        },
        "recovery": {
          "successful": true,
          "error": null
        }
      }
    },
    "database_schema_validation": {
      "status": "PASS",
      "details": {
        "schema_columns": [
          "document_id",
          "user_id",
          "filename",
          "mime",
          "bytes_len",
          "file_sha256",
          "parsed_sha256",
          "raw_path",
          "parsed_path",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "required_columns": [
          "document_id",
          "user_id",
          "file_sha256",
          "processing_status",
          "created_at"
        ],
        "missing_columns": [],
        "has_required_columns": true,
        "document_id_type": "uuid",
        "user_id_type": "uuid",
        "correct_types": true,
        "full_schema": [
          {
            "column_name": "document_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "user_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "filename",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "mime",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "bytes_len",
            "data_type": "bigint",
            "is_nullable": "NO"
          },
          {
            "column_name": "file_sha256",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_sha256",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "raw_path",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_path",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "processing_status",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "created_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          },
          {
            "column_name": "updated_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          }
        ]
      }
    }
  },
  "summary": {
    "total_tests": 6,
    "passed": 5,
    "failed": 1,
    "critical_failures": 1
  }
}