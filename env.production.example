# Production Environment Configuration for 003 Worker Refactor
# Copy this file to .env.production and fill in your actual values
# DO NOT commit actual production credentials to version control

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# Production database connection string
DATABASE_URL=postgresql://username:password@production-host:5432/insurance_navigator_prod

# Database schema for upload pipeline
DATABASE_SCHEMA=upload_pipeline

# Database connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
# Production Supabase instance URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase service role key (for admin operations)
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# Supabase anon key (for client operations)
SUPABASE_ANON_KEY=your_anon_key_here

# Supabase storage bucket for documents
SUPABASE_STORAGE_BUCKET=insurance_documents_prod

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
# API server host and port
API_HOST=0.0.0.0
API_PORT=8000

# API server workers
API_WORKERS=4

# API server timeout settings
API_TIMEOUT=300
API_KEEPALIVE_TIMEOUT=5

# API server CORS settings
API_CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
# Worker concurrency settings
WORKER_CONCURRENCY=4
WORKER_MAX_TASKS_PER_CHILD=1000

# Worker timeout settings
WORKER_TASK_TIMEOUT=600
WORKER_TASK_SOFT_TIMEOUT=540

# Worker retry settings
WORKER_MAX_RETRIES=3
WORKER_RETRY_DELAY=5

# Worker queue settings
WORKER_QUEUE_NAME=upload_pipeline
WORKER_DEFAULT_QUEUE=default

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================
# LlamaParse API configuration
LLAMAPARSE_API_KEY=your_llamaparse_api_key_here
LLAMAPARSE_API_URL=https://api.llamaindex.ai
LLAMAPARSE_WEBHOOK_URL=https://your-domain.com/api/webhooks/llamaparse

# OpenAI API configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.1

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# File storage settings
STORAGE_TYPE=supabase
STORAGE_MAX_FILE_SIZE=100MB
STORAGE_ALLOWED_EXTENSIONS=pdf,doc,docx,txt,rtf

# Document processing settings
MAX_DOCUMENT_SIZE=50MB
MAX_PAGE_COUNT=1000
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# =============================================================================
# MONITORING AND LOGGING CONFIGURATION
# =============================================================================
# Logging level
LOG_LEVEL=INFO

# Logging format
LOG_FORMAT=json

# Log file paths
LOG_FILE_PATH=/var/log/insurance_navigator
LOG_FILE_MAX_SIZE=100MB
LOG_FILE_BACKUP_COUNT=5

# Monitoring settings
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=30
HEALTH_CHECK_INTERVAL=60

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT settings
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API key settings
API_KEY_HEADER=X-API-Key
API_KEY_REQUIRED=true

# Rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20

# CORS settings
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-API-Key

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Cache settings
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# Async settings
ASYNC_WORKERS=8
ASYNC_QUEUE_SIZE=1000

# Database optimization
DATABASE_STATEMENT_TIMEOUT=300
DATABASE_IDLE_IN_TRANSACTION_SESSION_TIMEOUT=300

# =============================================================================
# BACKUP AND RECOVERY CONFIGURATION
# =============================================================================
# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=/var/backups/insurance_navigator

# Recovery settings
RECOVERY_POINT_OBJECTIVE=4h
RECOVERY_TIME_OBJECTIVE=8h

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
# Testing mode
TESTING_MODE=false
TESTING_DATABASE_URL=postgresql://test_user:test_pass@test-host:5432/insurance_navigator_test

# Test data settings
TEST_DATA_ENABLED=false
TEST_DATA_PATH=/var/test_data

# =============================================================================
# COMPLIANCE AND AUDIT CONFIGURATION
# =============================================================================
# HIPAA compliance
HIPAA_COMPLIANCE_ENABLED=true
HIPAA_AUDIT_LOGGING=true
HIPAA_DATA_ENCRYPTION=true

# GDPR compliance
GDPR_COMPLIANCE_ENABLED=true
GDPR_DATA_RETENTION_DAYS=2555
GDPR_RIGHT_TO_BE_FORGOTTEN=true

# Audit logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555
AUDIT_LOG_LEVEL=INFO

# =============================================================================
# INCIDENT RESPONSE CONFIGURATION
# =============================================================================
# Alerting settings
ALERTING_ENABLED=true
ALERTING_SLACK_WEBHOOK=https://hooks.slack.com/services/your/webhook/url
ALERTING_EMAIL_SMTP_HOST=smtp.gmail.com
ALERTING_EMAIL_SMTP_PORT=587
ALERTING_EMAIL_USERNAME=alerts@your-domain.com
ALERTING_EMAIL_PASSWORD=your_email_password_here

# PagerDuty settings
PAGERDUTY_API_KEY=your_pagerduty_api_key_here
PAGERDUTY_SERVICE_ID=your_service_id_here

# Escalation settings
ESCALATION_ENABLED=true
ESCALATION_TIMEOUT_MINUTES=15
ESCALATION_MAX_LEVELS=3

# =============================================================================
# COST OPTIMIZATION CONFIGURATION
# =============================================================================
# Resource limits
MAX_CPU_USAGE=80
MAX_MEMORY_USAGE=80
MAX_DISK_USAGE=85

# Cost monitoring
COST_MONITORING_ENABLED=true
COST_ALERT_THRESHOLD=1000
COST_ALERT_CURRENCY=USD

# Auto-scaling settings
AUTO_SCALING_ENABLED=true
AUTO_SCALING_MIN_INSTANCES=2
AUTO_SCALING_MAX_INSTANCES=10
AUTO_SCALING_TARGET_CPU_UTILIZATION=70

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# Deployment environment
ENVIRONMENT=production
DEPLOYMENT_VERSION=1.0.0

# Rollback settings
ROLLBACK_ENABLED=true
ROLLBACK_AUTO=true
ROLLBACK_TIMEOUT_MINUTES=10

# Health check settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=10
HEALTH_CHECK_FAILURE_THRESHOLD=3

# =============================================================================
# EXTERNAL INTEGRATIONS CONFIGURATION
# =============================================================================
# Email service (for notifications)
EMAIL_SERVICE_TYPE=smtp
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USERNAME=your_email@your-domain.com
EMAIL_SMTP_PASSWORD=your_email_password_here
EMAIL_FROM_ADDRESS=noreply@your-domain.com

# SMS service (for critical alerts)
SMS_SERVICE_TYPE=twilio
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# =============================================================================
# DEVELOPMENT AND DEBUGGING CONFIGURATION
# =============================================================================
# Debug mode (should be false in production)
DEBUG=false

# Development tools (should be disabled in production)
DEVELOPMENT_TOOLS_ENABLED=false
API_DOCS_ENABLED=false
GRAPHIQL_ENABLED=false

# Profiling and debugging
PROFILING_ENABLED=false
DEBUG_TOOLBAR_ENABLED=false
SQL_LOGGING_ENABLED=false

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================
# These can be overridden for specific environments
# Production overrides
PRODUCTION_OVERRIDE_1=production_specific_value
PRODUCTION_OVERRIDE_2=another_production_value

# =============================================================================
# NOTES AND DOCUMENTATION
# =============================================================================
# This file contains all production environment variables
# 
# IMPORTANT SECURITY NOTES:
# 1. Never commit actual API keys or secrets to version control
# 2. Use environment-specific .env files for different deployments
# 3. Rotate secrets regularly
# 4. Use least-privilege access for all services
# 5. Enable audit logging for all sensitive operations
# 
# DEPLOYMENT CHECKLIST:
# 1. Copy this file to .env.production
# 2. Fill in all required values
# 3. Verify all external service connections
# 4. Test database connectivity
# 5. Validate API endpoints
# 6. Run smoke tests
# 7. Verify monitoring and alerting
# 8. Check security settings
# 9. Validate compliance requirements
# 10. Document any customizations
