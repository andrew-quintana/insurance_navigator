{
  "test_timestamp": "2025-09-12T08:50:16.528633",
  "test_name": "Upload Pipeline and RAG Integration Test",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "frontend": "local_nextjs",
    "environment": "manual_testing"
  },
  "tests": {
    "system_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-12T15:49:48.935545",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true
      }
    },
    "user_authentication": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": "b2cad60f-5a2b-4ad7-938e-c0dba047a6a7",
        "token_valid": true,
        "user_created": true
      }
    },
    "document_upload_pipeline": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "expected_document_uuid": "915515d3-00b4-57eb-b3ac-31b4e4303f2e",
        "expected_chunk_uuid": "4d77182a-a295-5336-9d8c-0cd3e79f7cd9",
        "content_hash": "85fb369a95a5f5bffd7a7361faf9d7f8cdba54231e1407db1e2e22f86afad4a3",
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_insurance_policy_1757692216.pdf",
                "mime_type": "application/pdf",
                "bytes_len": 2048,
                "sha256": "85fb369a95a5f5bffd7a7361faf9d7f8cdba54231e1407db1e2e22f86afad4a3"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        }
      }
    },
    "document_processing": {
      "status": "ERROR",
      "error": "relation \"upload_pipeline.chunks\" does not exist"
    },
    "rag_tool_integration": {
      "status": "FAIL",
      "details": {
        "rag_tool_available": true,
        "query": "What is my deductible?",
        "total_chunks_retrieved": 0,
        "relevant_chunks": 0,
        "retrieval_successful": false,
        "chunk_details": []
      }
    },
    "end_to_end_information_request": {
      "status": "PASS",
      "details": {
        "total_queries": 5,
        "successful_queries": 5,
        "overall_success": true,
        "query_results": [
          {
            "query": "What is my deductible?",
            "status": "PASS",
            "has_response": true,
            "has_conversation_id": true,
            "has_timestamp": true,
            "response_preview": "I apologize, but I wasn't able to find any information about your annual deductible in the available documents. The deductible is an important part of your insurance coverage, as it's the amount you h..."
          },
          {
            "query": "How much do I pay for specialist visits?",
            "status": "PASS",
            "has_response": true,
            "has_conversation_id": true,
            "has_timestamp": true,
            "response_preview": "I'm sorry, but I wasn't able to find any information about how much you pay for specialist visits in the available documents. Navigating insurance coverage can be really confusing, and I know it's fru..."
          },
          {
            "query": "What preventive services are covered?",
            "status": "PASS",
            "has_response": true,
            "has_conversation_id": true,
            "has_timestamp": true,
            "response_preview": "I'm sorry, but I wasn't able to find any information about what preventive services are covered under your insurance plan. Navigating insurance benefits can be really confusing, and I know it's frustr..."
          },
          {
            "query": "What is my out-of-pocket maximum?",
            "status": "PASS",
            "has_response": true,
            "has_conversation_id": true,
            "has_timestamp": true,
            "response_preview": "I'm sorry, but I wasn't able to find any information about your out-of-pocket maximum in the available documents. The out-of-pocket maximum is an important part of your insurance coverage, as it's the..."
          },
          {
            "query": "Are emergency room visits covered?",
            "status": "PASS",
            "has_response": true,
            "has_conversation_id": true,
            "has_timestamp": true,
            "response_preview": "I'm sorry, but I wasn't able to find any information about whether emergency room visits are covered under your insurance plan. Navigating insurance benefits can be really confusing, and I know it's f..."
          }
        ]
      }
    },
    "database_consistency": {
      "status": "ERROR",
      "error": "relation \"upload_pipeline.chunks\" does not exist"
    }
  },
  "summary": {
    "total_tests": 7,
    "passed": 4,
    "failed": 3,
    "critical_failures": 3
  },
  "workflow": {
    "user_created": true,
    "user_id": "b2cad60f-5a2b-4ad7-938e-c0dba047a6a7",
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIzMjliYTg5Mi03NjkwLTQ4OGYtYTk0NS02OTAzZDBiY2RiM2MiLCJlbWFpbCI6InVwbG9hZF9yYWdfdGVzdF8xNzU3NjkyMjE2QGV4YW1wbGUuY29tIiwiZXhwIjoxNzU3Nzc4NjE3LCJpYXQiOjE3NTc2OTIyMTcsImlzcyI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItbWluaW1hbC1hdXRoIiwiYXVkIjoiaW5zdXJhbmNlLW5hdmlnYXRvci11c2VycyJ9._DKtlO6NqrWj4WAaOxPkC_McChAgziR_CKNSdBCqUU8",
    "document_uploaded": true,
    "document_id": "915515d3-00b4-57eb-b3ac-31b4e4303f2e",
    "document_processed": false,
    "rag_query_tested": true,
    "rag_response_received": true,
    "conversation_id": "conv_1757692224"
  }
}