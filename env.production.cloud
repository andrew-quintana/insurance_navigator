# Production Environment Configuration for Cloud Deployment
# Phase 1: Cloud Environment Setup & Validation

# =============================================================================
# CLOUD DEPLOYMENT CONFIGURATION
# =============================================================================
# Environment identifier
ENVIRONMENT=production
DEPLOYMENT_PHASE=phase1

# =============================================================================
# VERCEL FRONTEND CONFIGURATION
# =============================================================================
# Vercel deployment URL (will be set by Vercel)
VERCEL_URL=https://insurance-navigator.vercel.app

# Frontend environment variables
NEXT_PUBLIC_API_BASE_URL=***REMOVED***
NEXT_PUBLIC_APP_ENV=production
NEXT_PUBLIC_APP_VERSION=1.0.0

# =============================================================================
# RENDER BACKEND CONFIGURATION
# =============================================================================
# Render deployment URL (will be set by Render)
RENDER_URL=***REMOVED***

# API server configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1
API_TIMEOUT=300
API_KEEPALIVE_TIMEOUT=75

# =============================================================================
# SUPABASE CONFIGURATION
# =============================================================================
# Production Supabase instance (replace with actual values)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here
SUPABASE_STORAGE_BUCKET=insurance_documents_prod

# Database configuration
DATABASE_URL=postgresql://postgres:password@db.your-project.supabase.co:5432/postgres
DATABASE_SCHEMA=upload_pipeline
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================
# LlamaParse API configuration
LLAMAPARSE_API_KEY=your_llamaparse_api_key_here
LLAMAPARSE_API_URL=https://api.llamaindex.ai
LLAMAPARSE_WEBHOOK_URL=***REMOVED***/api/webhooks/llamaparse

# OpenAI API configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_API_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.1

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT settings
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# API security
API_KEY_HEADER=X-API-Key
API_KEY_REQUIRED=true
SECURITY_BYPASS_ENABLED=false

# Rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20

# CORS settings
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-API-Key
CORS_ALLOW_ORIGINS=https://insurance-navigator.vercel.app

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# Cache settings
CACHE_ENABLED=true
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# Async settings
ASYNC_WORKERS=4
ASYNC_QUEUE_SIZE=1000

# Database optimization
DATABASE_STATEMENT_TIMEOUT=300
DATABASE_IDLE_IN_TRANSACTION_SESSION_TIMEOUT=300
ASYNCPG_DISABLE_PREPARED_STATEMENTS=1

# =============================================================================
# MONITORING AND LOGGING CONFIGURATION
# =============================================================================
# Logging level
LOG_LEVEL=INFO
LOG_FORMAT=json

# Monitoring settings
MONITORING_ENABLED=true
METRICS_COLLECTION_INTERVAL=30
HEALTH_CHECK_INTERVAL=60

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
# Worker concurrency settings
WORKER_CONCURRENCY=2
WORKER_MAX_TASKS_PER_CHILD=1000

# Worker timeout settings
WORKER_TASK_TIMEOUT=600
WORKER_TASK_SOFT_TIMEOUT=540

# Worker retry settings
WORKER_MAX_RETRIES=3
WORKER_RETRY_DELAY=5

# Worker queue settings
WORKER_QUEUE_NAME=upload_pipeline
WORKER_DEFAULT_QUEUE=default

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
# File storage settings
STORAGE_TYPE=supabase
STORAGE_MAX_FILE_SIZE=100MB
STORAGE_ALLOWED_EXTENSIONS=pdf,doc,docx,txt,rtf

# Document processing settings
MAX_DOCUMENT_SIZE=50MB
MAX_PAGE_COUNT=1000
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# =============================================================================
# CLOUD PLATFORM OPTIMIZATIONS
# =============================================================================
# Python optimizations for cloud deployment
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# Uvicorn optimizations
UVICORN_WORKERS=1
STARTUP_TIMEOUT=180
KEEP_ALIVE=75
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100

# =============================================================================
# COMPLIANCE AND AUDIT CONFIGURATION
# =============================================================================
# HIPAA compliance
HIPAA_COMPLIANCE_ENABLED=true
HIPAA_AUDIT_LOGGING=true
HIPAA_DATA_ENCRYPTION=true

# GDPR compliance
GDPR_COMPLIANCE_ENABLED=true
GDPR_DATA_RETENTION_DAYS=2555
GDPR_RIGHT_TO_BE_FORGOTTEN=true

# Audit logging
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555
AUDIT_LOG_LEVEL=INFO

# =============================================================================
# DEPLOYMENT VALIDATION
# =============================================================================
# Health check settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=10
HEALTH_CHECK_FAILURE_THRESHOLD=3

# Deployment validation
DEPLOYMENT_VERSION=1.0.0
ROLLBACK_ENABLED=true
ROLLBACK_AUTO=false
ROLLBACK_TIMEOUT_MINUTES=10

# =============================================================================
# NOTES AND DOCUMENTATION
# =============================================================================
# This file contains production environment variables for cloud deployment
# 
# IMPORTANT SECURITY NOTES:
# 1. Replace all placeholder values with actual production credentials
# 2. Never commit actual API keys or secrets to version control
# 3. Use environment-specific .env files for different deployments
# 4. Rotate secrets regularly
# 5. Use least-privilege access for all services
# 6. Enable audit logging for all sensitive operations
# 
# DEPLOYMENT CHECKLIST:
# 1. Replace placeholder values with actual production credentials
# 2. Verify all external service connections
# 3. Test database connectivity
# 4. Validate API endpoints
# 5. Run Phase 1 cloud deployment tests
# 6. Verify monitoring and alerting
# 7. Check security settings
# 8. Validate compliance requirements
# 9. Document any customizations
# 10. Proceed to Phase 2 integration testing
