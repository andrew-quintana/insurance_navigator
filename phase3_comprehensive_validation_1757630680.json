{
  "test_timestamp": "2025-09-11T15:44:34.186548",
  "phase": "3",
  "test_name": "Phase 3: Comprehensive Validation Testing",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "environment": "phase3_comprehensive_validation"
  },
  "tests": {
    "system_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-11T22:44:32.112924",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true
      }
    },
    "database_connectivity": {
      "status": "PASS",
      "details": {
        "connectivity": true,
        "schema_columns": [
          "document_id",
          "user_id",
          "filename",
          "mime",
          "bytes_len",
          "file_sha256",
          "parsed_sha256",
          "raw_path",
          "parsed_path",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "missing_columns": [],
        "schema_ok": true
      }
    },
    "user_authentication": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": "509a6522-900b-4b82-a395-5200e90db9f1",
        "token_valid": true,
        "user_created": true
      }
    },
    "document_upload_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "expected_document_uuid": "21ed9a81-df27-5d80-ba12-8362dbdf3410",
        "expected_chunk_uuid": "5ef95a27-1ae5-5018-a492-e45cd7ed453c",
        "content_hash": "phase3_test_1757630675_This is a comprehensive Phase 3 test document crea",
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "phase3_test_document_1757630674.pdf",
                "mime_type": "application/pdf",
                "bytes_len": 1024,
                "sha256": "phase3_test_1757630675_This is a comprehensive Phase 3 test document crea"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        }
      }
    },
    "uuid_generation_consistency": {
      "status": "PASS",
      "details": {
        "document_uuid": "fac01650-9eb4-53db-b091-01f87addb917",
        "chunk_uuid": "c69be1cc-7ea1-53c6-9e21-b28cbf591757",
        "job_uuid1": "74172f94-591b-4a61-9a2c-ab7f645ea9b4",
        "job_uuid2": "ffe14371-8839-4e71-9c8b-8e39e7dd6ce9",
        "document_valid": true,
        "chunk_valid": true,
        "job_valid": true,
        "document_consistent": true,
        "chunk_consistent": true,
        "job_unique": true,
        "db_consistent": true,
        "retrieved_uuid": "fac01650-9eb4-53db-b091-01f87addb917"
      }
    },
    "chat_interaction_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "conversation_id": "conv_1757630679",
        "timestamp": "2025-09-11T22:44:39.653500",
        "has_response": true,
        "response_valid": true,
        "response_data": {
          "text": "I'm sorry, but I wasn't able to find any relevant information in the document you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, so I'll do my best to assist you further. Could you please provide some more details about what kind of information you're looking for? I'd be happy to try searching again or explaining your insurance policy in simpler terms. Let me know how else I can help.",
          "response": "I'm sorry, but I wasn't able to find any relevant information in the document you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, so I'll do my best to assist you further. Could you please provide some more details about what kind of information you're looking for? I'd be happy to try searching again or explaining your insurance policy in simpler terms. Let me know how else I can help.",
          "conversation_id": "conv_1757630679",
          "timestamp": "2025-09-11T22:44:39.653500",
          "metadata": {
            "processing_time": 3.667222261428833,
            "confidence": 0.9,
            "agent_sources": [
              "information_retrieval"
            ],
            "input_processing": {
              "original_language": "auto",
              "translation_applied": false
            },
            "agent_processing": {
              "agents_used": [
                "information_retrieval"
              ],
              "processing_time_ms": 3667
            },
            "output_formatting": {
              "tone_applied": "empathetic",
              "readability_level": "8th_grade",
              "next_steps_included": false
            }
          },
          "next_steps": [],
          "sources": [
            "information_retrieval"
          ]
        }
      }
    },
    "database_consistency": {
      "status": "PASS",
      "details": {
        "user_documents_count": 0,
        "documents_valid": true,
        "uuid_consistency": true,
        "user_documents": []
      }
    },
    "performance_validation": {
      "status": "PASS",
      "details": {
        "uuid_generation": {
          "time_seconds": 0.0013489723205566406,
          "threshold_seconds": 0.5,
          "uuids_generated": 50,
          "meets_threshold": true
        },
        "cloud_response": {
          "time_seconds": 0.13704609870910645,
          "threshold_seconds": 3.0,
          "status_code": 200,
          "meets_threshold": true
        }
      }
    },
    "error_handling_validation": {
      "status": "PASS",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "cloud_error_handling": {
          "invalid_endpoint_handled": true,
          "invalid_auth_handled": true
        }
      }
    },
    "cleanup_and_final_validation": {
      "status": "ERROR",
      "error": "local variable 'cleanup_error' referenced before assignment"
    }
  },
  "summary": {
    "total_tests": 10,
    "passed": 9,
    "failed": 1,
    "critical_failures": 1
  },
  "workflow": {
    "user_created": true,
    "user_id": "509a6522-900b-4b82-a395-5200e90db9f1",
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3ZjEyZjJlNS0wMjkyLTRmYmMtODQ5NC0wOGZkYTI2MjQ4NTMiLCJlbWFpbCI6InBoYXNlM190ZXN0X3VzZXJfMTc1NzYzMDY3NEBleGFtcGxlLmNvbSIsImV4cCI6MTc1NzcxNzA3NSwiaWF0IjoxNzU3NjMwNjc1LCJpc3MiOiJpbnN1cmFuY2UtbmF2aWdhdG9yLW1pbmltYWwtYXV0aCIsImF1ZCI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItdXNlcnMifQ.VndCWx_epXJvnZcYkTml9_SVJ9MCqxcGQsxKAObXi6w",
    "document_uploaded": true,
    "document_id": "21ed9a81-df27-5d80-ba12-8362dbdf3410",
    "document_processed": false,
    "chat_interaction": true,
    "conversation_id": "conv_1757630679"
  }
}