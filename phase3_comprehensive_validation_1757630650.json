{
  "test_timestamp": "2025-09-11T15:44:02.828794",
  "phase": "3",
  "test_name": "Phase 3: Comprehensive Validation Testing",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "environment": "phase3_comprehensive_validation"
  },
  "tests": {
    "system_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-11T22:43:57.112154",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true
      }
    },
    "database_connectivity": {
      "status": "PASS",
      "details": {
        "connectivity": true,
        "schema_columns": [
          "document_id",
          "user_id",
          "filename",
          "mime",
          "bytes_len",
          "file_sha256",
          "parsed_sha256",
          "raw_path",
          "parsed_path",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "missing_columns": [],
        "schema_ok": true
      }
    },
    "user_authentication": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": null,
        "token_valid": true,
        "user_created": true
      }
    },
    "document_upload_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "expected_document_uuid": "6855feb4-fb32-5b73-a792-ea99c29459d2",
        "expected_chunk_uuid": "ce0825f8-0fb1-54dd-b3ca-0ec1fc7a3559",
        "content_hash": "phase3_test_1757630644_This is a comprehensive Phase 3 test document crea",
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "phase3_test_document_1757630642.pdf",
                "mime_type": "application/pdf",
                "bytes_len": 1024,
                "sha256": "phase3_test_1757630644_This is a comprehensive Phase 3 test document crea"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        }
      }
    },
    "uuid_generation_consistency": {
      "status": "SKIP",
      "details": {
        "error": "No user ID available for UUID generation"
      }
    },
    "chat_interaction_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "conversation_id": "conv_1757630650",
        "timestamp": "2025-09-11T22:44:10.070164",
        "has_response": true,
        "response_valid": true,
        "response_data": {
          "text": "I'm sorry, but I wasn't able to find any relevant information in the documents you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, so I'll do my best to assist you further. Could you please provide me with some more details about what you're looking for? I'd be happy to try searching again or explaining any insurance-related information I can find. Please let me know how else I can help.",
          "response": "I'm sorry, but I wasn't able to find any relevant information in the documents you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, so I'll do my best to assist you further. Could you please provide me with some more details about what you're looking for? I'd be happy to try searching again or explaining any insurance-related information I can find. Please let me know how else I can help.",
          "conversation_id": "conv_1757630650",
          "timestamp": "2025-09-11T22:44:10.070164",
          "metadata": {
            "processing_time": 5.355044603347778,
            "confidence": 0.9,
            "agent_sources": [
              "information_retrieval"
            ],
            "input_processing": {
              "original_language": "auto",
              "translation_applied": false
            },
            "agent_processing": {
              "agents_used": [
                "information_retrieval"
              ],
              "processing_time_ms": 5355
            },
            "output_formatting": {
              "tone_applied": "empathetic",
              "readability_level": "8th_grade",
              "next_steps_included": false
            }
          },
          "next_steps": [],
          "sources": [
            "information_retrieval"
          ]
        }
      }
    },
    "database_consistency": {
      "status": "SKIP",
      "details": {
        "error": "No user ID available for database consistency check"
      }
    },
    "performance_validation": {
      "status": "PASS",
      "details": {
        "uuid_generation": {
          "time_seconds": 0.0008318424224853516,
          "threshold_seconds": 0.5,
          "uuids_generated": 50,
          "meets_threshold": true
        },
        "cloud_response": {
          "time_seconds": 0.1688079833984375,
          "threshold_seconds": 3.0,
          "status_code": 200,
          "meets_threshold": true
        }
      }
    },
    "error_handling_validation": {
      "status": "PASS",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "cloud_error_handling": {
          "invalid_endpoint_handled": true,
          "invalid_auth_handled": true
        }
      }
    },
    "cleanup_and_final_validation": {
      "status": "FAIL",
      "details": {
        "cleanup_successful": true,
        "cleanup_error": null,
        "workflow_complete": false,
        "workflow_status": {
          "user_created": true,
          "user_id": null,
          "access_token": null,
          "document_uploaded": true,
          "document_id": "6855feb4-fb32-5b73-a792-ea99c29459d2",
          "document_processed": false,
          "chat_interaction": true,
          "conversation_id": "conv_1757630650"
        }
      }
    }
  },
  "summary": {
    "total_tests": 9,
    "passed": 7,
    "failed": 2,
    "critical_failures": 1
  },
  "workflow": {
    "user_created": true,
    "user_id": null,
    "access_token": null,
    "document_uploaded": true,
    "document_id": "6855feb4-fb32-5b73-a792-ea99c29459d2",
    "document_processed": false,
    "chat_interaction": true,
    "conversation_id": "conv_1757630650"
  }
}