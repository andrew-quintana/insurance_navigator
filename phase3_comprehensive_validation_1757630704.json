{
  "test_timestamp": "2025-09-11T15:44:57.985029",
  "phase": "3",
  "test_name": "Phase 3: Comprehensive Validation Testing",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "environment": "phase3_comprehensive_validation"
  },
  "tests": {
    "system_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-11T22:44:32.112924",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true
      }
    },
    "database_connectivity": {
      "status": "PASS",
      "details": {
        "connectivity": true,
        "schema_columns": [
          "document_id",
          "user_id",
          "filename",
          "mime",
          "bytes_len",
          "file_sha256",
          "parsed_sha256",
          "raw_path",
          "parsed_path",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "missing_columns": [],
        "schema_ok": true
      }
    },
    "user_authentication": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": "ccac24d4-f4cd-4f2f-824d-07c3e706762d",
        "token_valid": true,
        "user_created": true
      }
    },
    "document_upload_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "expected_document_uuid": "26b0ae76-9a7e-5c9b-8df2-21312787a7fb",
        "expected_chunk_uuid": "06639ff9-afd5-5b64-b2d9-26fa85421261",
        "content_hash": "phase3_test_1757630698_This is a comprehensive Phase 3 test document crea",
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "phase3_test_document_1757630697.pdf",
                "mime_type": "application/pdf",
                "bytes_len": 1024,
                "sha256": "phase3_test_1757630698_This is a comprehensive Phase 3 test document crea"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        }
      }
    },
    "uuid_generation_consistency": {
      "status": "PASS",
      "details": {
        "document_uuid": "29f9b872-490f-56d2-93af-40c96a989f5e",
        "chunk_uuid": "9cfa44f4-8f36-534a-bff2-bf9f7379dc28",
        "job_uuid1": "8c6efe06-80a5-48dc-8f3c-d385d31e359e",
        "job_uuid2": "d6ccc33c-5ba0-4eb7-8bea-39e233602b99",
        "document_valid": true,
        "chunk_valid": true,
        "job_valid": true,
        "document_consistent": true,
        "chunk_consistent": true,
        "job_unique": true,
        "db_consistent": true,
        "retrieved_uuid": "29f9b872-490f-56d2-93af-40c96a989f5e"
      }
    },
    "chat_interaction_workflow": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "conversation_id": "conv_1757630702",
        "timestamp": "2025-09-11T22:45:02.832491",
        "has_response": true,
        "response_valid": true,
        "response_data": {
          "text": "I apologize, but I was unable to find any relevant information in the document you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, so I'm happy to assist you further if you have any other questions about your policy or claims. Please let me know if there's anything else I can do to help.",
          "response": "I apologize, but I was unable to find any relevant information in the document you requested. As an insurance assistant, my role is to help you understand your coverage and benefits, so I'm happy to assist you further if you have any other questions about your policy or claims. Please let me know if there's anything else I can do to help.",
          "conversation_id": "conv_1757630702",
          "timestamp": "2025-09-11T22:45:02.832491",
          "metadata": {
            "processing_time": 3.1639552116394043,
            "confidence": 0.9,
            "agent_sources": [
              "information_retrieval"
            ],
            "input_processing": {
              "original_language": "auto",
              "translation_applied": false
            },
            "agent_processing": {
              "agents_used": [
                "information_retrieval"
              ],
              "processing_time_ms": 3163
            },
            "output_formatting": {
              "tone_applied": "empathetic",
              "readability_level": "8th_grade",
              "next_steps_included": false
            }
          },
          "next_steps": [],
          "sources": [
            "information_retrieval"
          ]
        }
      }
    },
    "database_consistency": {
      "status": "PASS",
      "details": {
        "user_documents_count": 0,
        "documents_valid": true,
        "uuid_consistency": true,
        "user_documents": []
      }
    },
    "performance_validation": {
      "status": "PASS",
      "details": {
        "uuid_generation": {
          "time_seconds": 0.001374959945678711,
          "threshold_seconds": 0.5,
          "uuids_generated": 50,
          "meets_threshold": true
        },
        "cloud_response": {
          "time_seconds": 0.18570804595947266,
          "threshold_seconds": 3.0,
          "status_code": 200,
          "meets_threshold": true
        }
      }
    },
    "error_handling_validation": {
      "status": "PASS",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "cloud_error_handling": {
          "invalid_endpoint_handled": true,
          "invalid_auth_handled": true
        }
      }
    },
    "cleanup_and_final_validation": {
      "status": "PASS",
      "details": {
        "cleanup_successful": true,
        "cleanup_error": null,
        "workflow_complete": true,
        "workflow_status": {
          "user_created": true,
          "user_id": "ccac24d4-f4cd-4f2f-824d-07c3e706762d",
          "access_token": "***REMOVED***.eyJzdWIiOiJhMWEwZGVkMi03NGI1LTRlMjUtYmRhYi01MDE2MTQ0ZTllOGIiLCJlbWFpbCI6InBoYXNlM190ZXN0X3VzZXJfMTc1NzYzMDY5N0BleGFtcGxlLmNvbSIsImV4cCI6MTc1NzcxNzA5OCwiaWF0IjoxNzU3NjMwNjk4LCJpc3MiOiJpbnN1cmFuY2UtbmF2aWdhdG9yLW1pbmltYWwtYXV0aCIsImF1ZCI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItdXNlcnMifQ.p0st_dR6pEAEL0p-kztNwX3Rt1HasjdBY9cflPXoQTA",
          "document_uploaded": true,
          "document_id": "26b0ae76-9a7e-5c9b-8df2-21312787a7fb",
          "document_processed": false,
          "chat_interaction": true,
          "conversation_id": "conv_1757630702"
        }
      }
    }
  },
  "summary": {
    "total_tests": 10,
    "passed": 10,
    "failed": 0,
    "critical_failures": 0
  },
  "workflow": {
    "user_created": true,
    "user_id": "ccac24d4-f4cd-4f2f-824d-07c3e706762d",
    "access_token": "***REMOVED***.eyJzdWIiOiJhMWEwZGVkMi03NGI1LTRlMjUtYmRhYi01MDE2MTQ0ZTllOGIiLCJlbWFpbCI6InBoYXNlM190ZXN0X3VzZXJfMTc1NzYzMDY5N0BleGFtcGxlLmNvbSIsImV4cCI6MTc1NzcxNzA5OCwiaWF0IjoxNzU3NjMwNjk4LCJpc3MiOiJpbnN1cmFuY2UtbmF2aWdhdG9yLW1pbmltYWwtYXV0aCIsImF1ZCI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItdXNlcnMifQ.p0st_dR6pEAEL0p-kztNwX3Rt1HasjdBY9cflPXoQTA",
    "document_uploaded": true,
    "document_id": "26b0ae76-9a7e-5c9b-8df2-21312787a7fb",
    "document_processed": false,
    "chat_interaction": true,
    "conversation_id": "conv_1757630702"
  }
}