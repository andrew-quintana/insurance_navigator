{
  "timestamp": "2025-06-05T11:41:27.926996",
  "tests_run": 8,
  "tests_passed": 5,
  "tests_failed": 3,
  "detailed_results": {
    "Database Schema": {
      "passed": true,
      "details": {
        "table_documents": true,
        "table_user_document_vectors": true,
        "table_feature_flags": true,
        "table_feature_flag_evaluations": true,
        "table_realtime_progress_updates": true,
        "function_update_document_progress": true,
        "function_evaluate_feature_flag": true,
        "function_update_updated_at_column": true,
        "view_document_processing_stats": true,
        "view_failed_documents": true,
        "view_stuck_documents": true,
        "view_user_upload_stats": true,
        "feature_flag_function_works": true
      },
      "issues": []
    },
    "Edge Functions": {
      "passed": false,
      "details": {
        "upload-handler_cors": false,
        "upload-handler_deployed": false,
        "processing-webhook_cors": false,
        "processing-webhook_deployed": true,
        "progress-tracker_cors": false,
        "progress-tracker_deployed": false
      },
      "issues": [
        "upload-handler: CORS not working",
        "upload-handler: Not properly deployed",
        "processing-webhook: CORS not working",
        "progress-tracker: CORS not working",
        "progress-tracker: Not properly deployed"
      ]
    },
    "Storage Configuration": {
      "passed": true,
      "details": {
        "documents_bucket_exists": true,
        "bucket_accessible": true,
        "rls_enforced": true
      },
      "issues": []
    },
    "LlamaParse Integration": {
      "passed": true,
      "details": {
        "client_file_exists": true,
        "has_createLlamaParseClient": true,
        "has_LlamaParseClient": true,
        "has_LlamaParseConfig": true,
        "has_LlamaParseJobRequest": true,
        "webhook_url": "https://jhrespvvhbnloxrieycf.supabase.co/functions/v1/processing-webhook",
        "api_key_configured": false
      },
      "issues": [
        "LlamaParse API key not configured"
      ]
    },
    "Feature Flags": {
      "passed": true,
      "details": {
        "feature_flags_accessible": true,
        "existing_flags_count": 5,
        "v2_flags_count": 1,
        "evaluation_function_works": true
      },
      "issues": []
    },
    "Real-time Progress": {
      "passed": false,
      "details": {
        "progress_table_accessible": true
      },
      "issues": [
        "Real-time progress error: {'message': 'insert or update on table \"realtime_progress_updates\" violates foreign key constraint \"realtime_progress_updates_user_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (user_id)=(00000000-0000-0000-0000-000000000000) is not present in table \"users\".'}"
      ]
    },
    "Client Integration": {
      "passed": true,
      "details": {
        "client_file_exists": true,
        "has_V2UploadClient": true,
        "has_UploadProgress": true,
        "has_UploadConfig": true,
        "has_createUploadClient": true,
        "has_initializeUpload": true,
        "has_completeUpload": true
      },
      "issues": []
    },
    "End-to-End Flow": {
      "passed": false,
      "details": {},
      "issues": [
        "End-to-end test error: {'message': 'insert or update on table \"documents\" violates foreign key constraint \"documents_user_id_fkey\"', 'code': '23503', 'hint': None, 'details': 'Key (user_id)=(00000000-0000-0000-0000-000000000001) is not present in table \"users\".'}"
      ]
    }
  },
  "errors": [],
  "warnings": [],
  "success_rate": 62.5,
  "phase_3_4_ready": false,
  "critical_issues": [
    "CRITICAL: Edge Functions failure"
  ],
  "recommendations": [
    "Fix critical failures before proceeding to Phase 5"
  ]
}