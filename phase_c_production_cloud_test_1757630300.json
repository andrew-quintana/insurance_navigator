{
  "test_timestamp": "2025-09-11T15:38:01.891207",
  "phase": "C",
  "test_name": "Phase C: Production Cloud Backend Testing",
  "configuration": {
    "backend": "production_cloud",
    "database": "production_supabase",
    "environment": "production_cloud_testing"
  },
  "tests": {
    "production_cloud_health": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "health_data": {
          "status": "healthy",
          "timestamp": "2025-09-11T22:37:53.945310",
          "services": {
            "database": "healthy",
            "supabase_auth": "healthy",
            "llamaparse": "healthy",
            "openai": "healthy"
          },
          "version": "3.0.0"
        },
        "all_services_healthy": true,
        "response_time_ms": "unknown"
      }
    },
    "authentication_system": {
      "status": "PASS",
      "details": {
        "signup_status": 201,
        "login_status": 200,
        "user_id": null,
        "token_valid": true,
        "signup_response": {
          "user": {
            "id": "cd3cac2a-1326-41cf-86ff-e3af997f4fc3",
            "email": "test_user_1757630281@example.com",
            "name": "test_user_1757630281"
          },
          "access_token": "***REMOVED***.eyJzdWIiOiJjZDNjYWMyYS0xMzI2LTQxY2YtODZmZi1lM2FmOTk3ZjRmYzMiLCJlbWFpbCI6InRlc3RfdXNlcl8xNzU3NjMwMjgxQGV4YW1wbGUuY29tIiwiZXhwIjoxNzU3NzE2NjgzLCJpYXQiOjE3NTc2MzAyODMsImlzcyI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItbWluaW1hbC1hdXRoIiwiYXVkIjoiaW5zdXJhbmNlLW5hdmlnYXRvci11c2VycyJ9.j8oKb5FWEyl1yxoh3bu8kWfXoHjn9KR-rfhOi_T1k9k",
          "token_type": "bearer"
        },
        "login_response": {
          "user": {
            "id": "d5d17ce6-6e94-4c0e-b5ce-aa000a69d83f",
            "email": "test_user_1757630281@example.com",
            "name": "test_user_1757630281"
          },
          "access_token": "***REMOVED***.eyJzdWIiOiJkNWQxN2NlNi02ZTk0LTRjMGUtYjVjZS1hYTAwMGE2OWQ4M2YiLCJlbWFpbCI6InRlc3RfdXNlcl8xNzU3NjMwMjgxQGV4YW1wbGUuY29tIiwiZXhwIjoxNzU3NzE2NjgzLCJpYXQiOjE3NTc2MzAyODMsImlzcyI6Imluc3VyYW5jZS1uYXZpZ2F0b3ItbWluaW1hbC1hdXRoIiwiYXVkIjoiaW5zdXJhbmNlLW5hdmlnYXRvci11c2VycyJ9.za4O76s6Ynuc6GA5xGUSyiRn-RF-3Bf1aYUwk24TjJQ",
          "token_type": "bearer"
        }
      }
    },
    "uuid_generation_production_cloud": {
      "status": "PASS",
      "details": {
        "document_uuid": "a4741e11-5d78-5ab5-8b7e-fd361ee4df1f",
        "chunk_uuid": "6f2fad55-099e-5286-8dc7-059ae88aa400",
        "job_uuid": "3cbabde2-4e0c-4854-9a0d-6236799b7912",
        "document_valid": true,
        "chunk_valid": true,
        "job_valid": true,
        "retrieved_uuid": "a4741e11-5d78-5ab5-8b7e-fd361ee4df1f",
        "is_consistent": true,
        "database_operations_successful": true
      }
    },
    "end_to_end_upload_pipeline": {
      "status": "PASS",
      "details": {
        "status_code": 422,
        "validation_working": true,
        "response_data": {
          "detail": [
            {
              "type": "missing",
              "loc": [
                "body",
                "bytes_len"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_document.pdf",
                "mime_type": "application/pdf"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            },
            {
              "type": "missing",
              "loc": [
                "body",
                "mime"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_document.pdf",
                "mime_type": "application/pdf"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            },
            {
              "type": "missing",
              "loc": [
                "body",
                "sha256"
              ],
              "msg": "Field required",
              "input": {
                "filename": "test_document.pdf",
                "mime_type": "application/pdf"
              },
              "url": "https://errors.pydantic.dev/2.6/v/missing"
            }
          ]
        },
        "endpoint_accessible": true
      }
    },
    "chat_endpoint_uuid_context": {
      "status": "PASS",
      "details": {
        "status_code": 200,
        "conversation_id": "conv_1757630299",
        "timestamp": "2025-09-11T22:38:19.215949",
        "has_response": true,
        "response_valid": true,
        "response_data": {
          "text": "I'm sorry, but I wasn't able to find any relevant information in the available documents to address your request. As an insurance assistant, my role is to provide helpful information to you, but it seems the documents I have access to don't contain the details needed to fully assist you at this time.\n\nPlease let me know if you have any other questions or if there's anything else I can try to help with. I'm here to support you through your insurance-related needs to the best of my abilities.",
          "response": "I'm sorry, but I wasn't able to find any relevant information in the available documents to address your request. As an insurance assistant, my role is to provide helpful information to you, but it seems the documents I have access to don't contain the details needed to fully assist you at this time.\n\nPlease let me know if you have any other questions or if there's anything else I can try to help with. I'm here to support you through your insurance-related needs to the best of my abilities.",
          "conversation_id": "conv_1757630299",
          "timestamp": "2025-09-11T22:38:19.215949",
          "metadata": {
            "processing_time": 9.7724928855896,
            "confidence": 0.9,
            "agent_sources": [
              "information_retrieval"
            ],
            "input_processing": {
              "original_language": "auto",
              "translation_applied": false
            },
            "agent_processing": {
              "agents_used": [
                "information_retrieval"
              ],
              "processing_time_ms": 9772
            },
            "output_formatting": {
              "tone_applied": "empathetic",
              "readability_level": "8th_grade",
              "next_steps_included": false
            }
          },
          "next_steps": [],
          "sources": [
            "information_retrieval"
          ]
        }
      }
    },
    "multi_user_uuid_isolation": {
      "status": "PASS",
      "details": {
        "generated_uuids": [
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440001",
            "uuid": "10585c40-97e6-5f9f-b073-99f7888c46fd"
          },
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440002",
            "uuid": "ca73a798-ae7d-5f0d-846c-a0d7cbac4af0"
          },
          {
            "user_id": "550e8400-e29b-41d4-a716-446655440003",
            "uuid": "d5d18a14-1383-51ec-95bd-0f980e8b8610"
          }
        ],
        "unique_uuids": 3,
        "is_isolated": true,
        "all_stored": true,
        "all_consistent": true,
        "stored_uuids": [
          "10585c40-97e6-5f9f-b073-99f7888c46fd",
          "ca73a798-ae7d-5f0d-846c-a0d7cbac4af0",
          "d5d18a14-1383-51ec-95bd-0f980e8b8610"
        ]
      }
    },
    "performance_production_cloud": {
      "status": "PASS",
      "details": {
        "uuid_generation": {
          "time_seconds": 0.0018358230590820312,
          "threshold_seconds": 1.0,
          "uuids_generated": 100,
          "meets_threshold": true
        },
        "cloud_response": {
          "time_seconds": 0.14324617385864258,
          "threshold_seconds": 5.0,
          "status_code": 200,
          "meets_threshold": true
        }
      }
    },
    "error_handling_recovery": {
      "status": "FAIL",
      "details": {
        "uuid_validation": {
          "results": [
            {
              "uuid": "invalid-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "not-a-uuid",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": "",
              "is_valid": false,
              "expected_valid": false
            },
            {
              "uuid": null,
              "is_valid": false,
              "expected_valid": false
            }
          ],
          "all_correct": true
        },
        "cloud_error_handling": {
          "invalid_endpoint_handled": false,
          "invalid_auth_handled": false
        }
      }
    },
    "database_consistency_validation": {
      "status": "PASS",
      "details": {
        "schema_validation": {
          "schema_columns": [
            "document_id",
            "user_id",
            "filename",
            "mime",
            "bytes_len",
            "file_sha256",
            "parsed_sha256",
            "raw_path",
            "parsed_path",
            "processing_status",
            "created_at",
            "updated_at"
          ],
          "required_columns": [
            "document_id",
            "user_id",
            "file_sha256",
            "processing_status",
            "created_at"
          ],
          "missing_columns": [],
          "has_required_columns": true,
          "document_id_type": "uuid",
          "user_id_type": "uuid",
          "correct_types": true
        },
        "consistency_test": {
          "test_uuid": "19cf8d0b-5a1d-588d-853d-fcc6a6d38cec",
          "retrieved_uuid": "19cf8d0b-5a1d-588d-853d-fcc6a6d38cec",
          "consistency_ok": true
        },
        "full_schema": [
          {
            "column_name": "document_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "user_id",
            "data_type": "uuid",
            "is_nullable": "NO"
          },
          {
            "column_name": "filename",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "mime",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "bytes_len",
            "data_type": "bigint",
            "is_nullable": "NO"
          },
          {
            "column_name": "file_sha256",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_sha256",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "raw_path",
            "data_type": "text",
            "is_nullable": "NO"
          },
          {
            "column_name": "parsed_path",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "processing_status",
            "data_type": "text",
            "is_nullable": "YES"
          },
          {
            "column_name": "created_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          },
          {
            "column_name": "updated_at",
            "data_type": "timestamp with time zone",
            "is_nullable": "YES"
          }
        ]
      }
    }
  },
  "summary": {
    "total_tests": 9,
    "passed": 8,
    "failed": 1,
    "critical_failures": 1
  }
}