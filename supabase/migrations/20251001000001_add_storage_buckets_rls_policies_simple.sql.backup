-- 20251001T000001_add_storage_buckets_rls_policies_simple.sql
-- Add missing RLS policies for storage.buckets table (simplified version)
-- This fixes the "Bucket not found" error when workers try to list objects

BEGIN;

-- Add RLS policies for storage.buckets table
CREATE POLICY "Allow service role to view buckets"
ON storage.buckets
FOR SELECT
TO service_role
USING (true);

CREATE POLICY "Allow service role to manage buckets"
ON storage.buckets
FOR ALL
TO service_role
USING (true)
WITH CHECK (true);

COMMIT;
